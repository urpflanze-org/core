/*! For license information please see urpflanze.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Urpflanze=e():t.Urpflanze=e()}(window,(function(){return(()=>{var t={193:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;const n=r(107),i=r(15),o=r(485),s=r(658);class a extends i.SceneChild{constructor(t={}){t.type="Group",super(t),this.children=[],["id","name","data","order","type"].forEach((e=>{e in t&&delete t[e]})),this.props=t}isStatic(){const t=this.children;for(let e=0,r=t.length;e<r;e++)if(!t[e].isStatic())return!1;return!0}isStaticIndexed(){const t=this.children;for(let e=0,r=t.length;e<r;e++)if(!t[e].isStaticIndexed())return!1;return!0}add(...t){for(let e=0,r=t.length;e<r;e++){const r=t[e],i=r.getProps();Object.keys(this.props).forEach((t=>{void 0===i[t]&&r.setProp(t,this.props[t])})),r.order=void 0!==r.order?r.order:this.children.length>0?Math.max.apply(this,this.children.map((t=>t.order||0)))+1:0,this.scene&&n.Scene.propagateToChilden(r,this.scene),this.children.push(r)}this.sortChildren()}sortChildren(){this.children.sort(((t,e)=>t.order-e.order)),this.children=this.children.map(((t,e)=>(t.order=e,t))),this.clearBuffer(!0)}getChildren(){return this.children}find(t){if(this.id===t||this.name===t)return this;const e=this.getChildren();for(let r=0,n=e.length;r<n;r++){const n=e[r].find(t);if(null!==n)return n}return null}get(t){return t>=0&&t<this.children.length?this.children[t]:null}remove(t){if(t>=0&&t<this.children.length){const e=this.children.splice(t,1);return this.clearBuffer(!0),e}return!1}removeFromId(t){for(let e=0,r=this.children.length;e<r;e++)if(this.children[e].id==t)return this.children.splice(e,1),this.clearBuffer(!0)}generate(t,e=!1,r){this.generateId=t,this.children.forEach((n=>n.generate(t,e,r)))}getBounding(){const t=[],e=s.Bounding.empty();if(this.children.length>0){this.children.forEach((e=>t.push(e.getBounding())));for(let r=0,n=this.children.length;r<n;r++)e.x=e.x>t[r].x?t[r].x:e.x,e.y=e.y>t[r].y?t[r].y:e.y,e.width=e.width<t[r].width?t[r].width:e.width,e.height=e.height<t[r].height?t[r].height:e.height;e.cx=e.x+e.width/2,e.cy=e.y+e.height/2}return e}clearBuffer(t=!1,e=!0){if(this.children.forEach((e=>e.clearBuffer(t,!1))),this.scene&&e){const r=this.scene.getParentsOfSceneChild(this);r.length>0&&r[r.length-1].clearBuffer(t,e)}}setProp(t,e){"object"==typeof t?Object.keys(t).forEach((e=>this.props[e]=t[e])):this.props[t]=e,this.children.forEach((r=>r.setProp(t,e)))}setPropUnsafe(t,e){super.setPropUnsafe(t,e),this.children.forEach((r=>r.setPropUnsafe(t,e)))}getBufferLength(t){return this.children.map((e=>e.getBufferLength(t))).reduce(((t,e)=>t+e),0)}getBuffer(){const t=this.children.map((t=>t.getBuffer())).filter((t=>void 0!==t)),e=t.reduce(((t,e)=>t+e.length),0);if(e>0){const r=new Float32Array(e);r.set(t[0],0);for(let e=1,n=0,i=t.length;e<i;e++)n+=t[e-1].length,r.set(t[e],n);return r}return o.ShapeBase.EMPTY_BUFFER}getIndexedBuffer(){const t=this.children.map((t=>t.getIndexedBuffer())).filter((t=>void 0!==t));return[].concat.apply([],t)}stream(t){this.children.forEach((e=>e.stream(t)))}}e.Group=a},107:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Scene=void 0;const n=r(15),i=r(193),o=r(775);class s{constructor(t={}){this.width=400,this.height=400,this.background="hsla(0, 0%, 0%, 1)",this.color="hsla(0, 0%, 100%, 1)",this.currentTime=0,void 0!==t.width&&(this.width=t.width),void 0!==t.height&&(this.height=t.height),void 0!==t.background&&(this.background=t.background),void 0!==t.color&&(this.color=t.color),this.children=[],this.center=[this.width/2,this.height/2],this.anchor=t.anchor&&Array.isArray(t.anchor)?["left"===t.anchor[0]?0:"right"===t.anchor[0]?this.width:this.center[0],"top"===t.anchor[1]?0:"bottom"===t.anchor[1]?this.height:this.center[1]]:[this.center[0],this.center[1]]}getWidth(t=100){return this.width*t/100}getHeight(t=100){return this.height*t/100}resize(t,e=t){this.width=t,this.height=e,this.center=[this.width/2,this.height/2];const r=[this.width/this.anchor[0],this.height/this.anchor[1]];this.anchor=[this.width/r[0],this.height/r[1]],this.children.forEach((t=>t.clearBuffer(!0,!1)))}update(t=0){this.currentTime=t;for(let t=0,e=this.children.length;t<e;t++)this.children[t].generate(this.currentTime,!0)}stream(t){this.children.forEach((e=>e.stream(t)))}getChildren(){return this.children}add(...t){const e="number"==typeof t[t.length-1]?t[t.length-1]:void 0,r=t.length-(void 0===e?0:1);for(let n=0;n<r;n++){const r=t[n];r.order=void 0!==e?e+n:void 0!==r.order?r.order:this.children.length>0?Math.max.apply(this,this.children.map((t=>t.order||0)))+1:0,s.propagateToChilden(r,this),this.children.push(r),r.clearBuffer(!0,!1),r.generate(0,!0)}this.sortChildren()}sortChildren(){this.children.sort(((t,e)=>t.order-e.order)),this.children=this.children.map(((t,e)=>(t.order=e,t)))}find(t){const e=this.getChildren();for(let r=0,n=e.length;r<n;r++){const n=e[r].find(t);if(null!==n)return n}return null}get(t){return t>=0&&t<this.children.length?this.children[t]:null}remove(t){t>=0&&t<this.children.length&&this.children.splice(t,1)}removeChildren(){this.children=[]}removeFromId(t){for(let e=0,r=this.children.length;e<r;e++)if(this.children[e].id===t||this.children[e].name===t)return void this.children.splice(e,1)}isFirstLevelChild(t){for(let e=0,r=this.children.length;e<r;e++)if(this.children[e].id===t.id)return!0;const e=this.getParentsOfSceneChild(t);return 1===e.length&&e[0]instanceof i.Group}getParentsOfSceneChild(t){const e=s.getParentsOfSceneChild(this,t);return e?(e.splice(0,1),e):[]}static getParentsOfSceneChild(t,e,r=[]){let a;if(t instanceof n.SceneChild){if(t.id==e.id)return r;if(t instanceof o.Shape&&t.shape){const n=r.slice();if(n.push(t),a=s.getParentsOfSceneChild(t.shape,e,n))return a}}if(t instanceof s||t instanceof i.Group){const n=t.getChildren();r.push(t);for(let t=0,i=n.length;t<i;t++){const i=n[t];if(a=s.getParentsOfSceneChild(i,e,r))return a}r.pop()}return null}static walk(t,e){if(e instanceof n.SceneChild){if(!1===t(e))return!1;if(e instanceof o.Shape&&e.shape&&!1===s.walk(t,e.shape))return!1}if(e instanceof s||e instanceof i.Group){const r=e.getChildren();for(let e=0,n=r.length;e<n;e++){const n=r[e];if(!1===s.walk(t,n))return!1}}}static propagateToChilden(t,e){t.scene=e,t instanceof i.Group?t.getChildren().forEach((t=>{s.propagateToChilden(t,e)})):t instanceof o.Shape&&t.shape&&(t.shape.scene=e,s.propagateToChilden(t.shape,e))}}e.Scene=s},15:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SceneChild=void 0;let r=0;e.SceneChild=class{constructor(t){var e;this.generateId=-1,this.id=null!==(e=t.id)&&void 0!==e?e:++r,this.type=t.type||"SceneChild",this.name=t.name||this.type+"_"+this.id,this.data=t.data||{},this.props={}}find(t){return this.id===t||this.name===t?this:null}getProps(){return this.props}getProp(t,e,r){var n;return null!==(n=this.props[t])&&void 0!==n?n:r}hasProp(t){return void 0!==this.props[t]}setPropUnsafe(t,e){"string"==typeof t?this.props[t]=e:Object.keys(t).forEach((e=>this.props[e]=t[e]))}}},932:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.distributePointsInBuffer=e.interpolate=e.prepareBufferForInterpolation=e.distanceFromRepetition=e.angle2FromRepetition=e.angleFromRepetition=e.random=e.noise=e.relativeClamp=e.clamp=e.lerp=e.toRadians=e.toDegrees=e.now=void 0;const n=r(21),i=r(345),o=r(271),s="undefined"!=typeof performance?performance:Date;function a(t,e,r){return r<=t?t:r>=e?e:r}e.now=function(){return s.now()},e.toDegrees=function(t){return 180*t/Math.PI},e.toRadians=function(t){return t*Math.PI/180},e.lerp=function(t,e,r){return(1-r)*t+r*e},e.clamp=a,e.relativeClamp=function(t,e,r,n,i){return a(n,i,(r-t)/(e-t)*(i-n)+n)};const u={random:new n(Math.random)};e.noise=function(t="random",e=0,r=0,i=0){return void 0===u[t]&&(u[t]=new n(t)),u[t].noise3D(e,r,i)};const h={};function c(t,e){const r=t.length,n=e.length;if(r===n)return[t,e];const i=Math.abs(r-n),o=r<n?e:t,s=f(r<n?t:e,Math.floor(i/2));return r>n?[o,s]:[s,o]}function f(t,e){const r=t.length,n=r/2,i=2*(n+e),o=n-1;if(o>1){const n=r-2,s=Math.floor(e/o);let a=(i-(r+s*n))/2;const u=Math.round(o/a),h=new Float32Array(i);for(let e=0,r=0,i=0;e<n;e+=2,r++,i+=2){const o=t[e],c=t[e+1],f=t[e+2],l=t[e+3];h[i]=o,h[i+1]=c;const d=a>0&&(r%u==0||e===n-2),p=s+(d?1:0),M=1/(p+1);for(let t=0;t<p;t++,i+=2){const e=M*(t+1);h[i+2]=(1-e)*o+e*f,h[i+3]=(1-e)*c+e*l}d&&a--}return h[i-2]=t[r-2],h[i-1]=t[r-1],h}const s=new Float32Array(i);for(let e=0;e<i;e+=2)s[e]=t[e%r],s[e+1]=t[(e+1)%r];return s}e.random=function(t,e=0,r=1,n){const i=t+"";if(void 0===h[i]){const t=function(t){let e=0,r=1779033703^t.length;for(;e<t.length;e++)r=Math.imul(r^t.charCodeAt(e),3432918353),r=r<<13|r>>>19;return function(){return r=Math.imul(r^r>>>16,2246822507),r=Math.imul(r^r>>>13,3266489909),(r^=r>>>16)>>>0}}(i);h[i]=(o=t(),s=t(),a=t(),u=t(),function(){let t=(o>>>=0)+(s>>>=0)|0;return o=s^s>>>9,s=(a>>>=0)+(a<<3)|0,t=t+(u=1+(u>>>=0)|0)|0,a=(a=a<<21|a>>>11)+t|0,(t>>>0)/4294967296})}var o,s,a,u;const c=e+h[i]()*(r-e);return void 0!==n?Math.round(c*10**n)/10**n:c},e.angleFromRepetition=function(t,e=[0,0]){if(t.type===i.ERepetitionType.Matrix){const r=[(t.col.count-1)/2,(t.row.count-1)/2];r[0]+=r[0]*e[0],r[1]+=r[1]*e[1];const n=t.col.index-1-r[0],i=t.row.index-1-r[1];return 0===n?0:Math.atan(i/n)}return(t.angle-Math.PI)/2},e.angle2FromRepetition=function(t,e=[0,0]){if(t.type===i.ERepetitionType.Matrix){const r=[(t.col.count-1)/2,(t.row.count-1)/2];r[0]+=r[0]*e[0],r[1]+=r[1]*e[1];const n=t.col.index-1-r[0],i=t.row.index-1-r[1];return 0===n?0:Math.atan2(i,n)}return t.angle-Math.PI},e.distanceFromRepetition=function(t,e=[0,0]){if(t.type===i.ERepetitionType.Matrix){const r=[.5,.5];r[0]+=r[0]*e[0],r[1]+=r[1]*e[1];const n=[t.col.offset,t.row.offset];return o.default.distance(n,r)}return 1},e.prepareBufferForInterpolation=c,e.interpolate=function(t,e,r=.5){const[n,i]=c(t,e),o=Math.max(n.length,i.length),s="number"==typeof r?[r]:r,a=o/2;if(s.length!==a){const t=s.length;for(let e=0;e<a;e++)s[e]=s[e%t]}const u=new Float32Array(o);for(let t=0,e=0;t<o;t+=2,e++)u[t]=(1-s[e])*n[t]+s[e]*i[t],u[t+1]=(1-s[e])*n[t+1]+s[e]*i[t+1];return u},e.distributePointsInBuffer=f},915:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.mod=e.log=e.PI2=e.PHI=e.Vec2=e.distributePointsInBuffer=e.prepareBufferForInterpolation=e.interpolate=e.distanceFromRepetition=e.angle2FromRepetition=e.angleFromRepetition=e.random=e.noise=e.now=e.toRadians=e.toDegrees=e.relativeClamp=e.clamp=e.lerp=void 0,i(r(46),e),r(887).glMatrix.setMatrixArrayType(Array),i(r(107),e),i(r(15),e),i(r(193),e),i(r(485),e),i(r(436),e),i(r(210),e),i(r(425),e),i(r(775),e),i(r(961),e),i(r(549),e),i(r(702),e),i(r(123),e),i(r(478),e),i(r(873),e),i(r(252),e),i(r(490),e),i(r(710),e),i(r(82),e),i(r(575),e),i(r(845),e),i(r(700),e),i(r(204),e);var o=r(932);Object.defineProperty(e,"lerp",{enumerable:!0,get:function(){return o.lerp}}),Object.defineProperty(e,"clamp",{enumerable:!0,get:function(){return o.clamp}}),Object.defineProperty(e,"relativeClamp",{enumerable:!0,get:function(){return o.relativeClamp}}),Object.defineProperty(e,"toDegrees",{enumerable:!0,get:function(){return o.toDegrees}}),Object.defineProperty(e,"toRadians",{enumerable:!0,get:function(){return o.toRadians}}),Object.defineProperty(e,"now",{enumerable:!0,get:function(){return o.now}}),Object.defineProperty(e,"noise",{enumerable:!0,get:function(){return o.noise}}),Object.defineProperty(e,"random",{enumerable:!0,get:function(){return o.random}}),Object.defineProperty(e,"angleFromRepetition",{enumerable:!0,get:function(){return o.angleFromRepetition}}),Object.defineProperty(e,"angle2FromRepetition",{enumerable:!0,get:function(){return o.angle2FromRepetition}}),Object.defineProperty(e,"distanceFromRepetition",{enumerable:!0,get:function(){return o.distanceFromRepetition}}),Object.defineProperty(e,"interpolate",{enumerable:!0,get:function(){return o.interpolate}}),Object.defineProperty(e,"prepareBufferForInterpolation",{enumerable:!0,get:function(){return o.prepareBufferForInterpolation}}),Object.defineProperty(e,"distributePointsInBuffer",{enumerable:!0,get:function(){return o.distributePointsInBuffer}});var s=r(271);Object.defineProperty(e,"Vec2",{enumerable:!0,get:function(){return s.default}});var a=r(888);Object.defineProperty(e,"PHI",{enumerable:!0,get:function(){return a.PHI}}),Object.defineProperty(e,"PI2",{enumerable:!0,get:function(){return a.PI2}}),Object.defineProperty(e,"log",{enumerable:!0,get:function(){return a.log}}),Object.defineProperty(e,"mod",{enumerable:!0,get:function(){return a.mod}})},271:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=new Array(4),n={from:(t=0,e)=>{const r=new Array(2);return"number"==typeof t?(r[0]=t,r[1]=null!=e?e:t):(r[0]=t[0],r[1]=t[1]),r},normalize:t=>{const e=n.length(t);return 0!==e?[t[0]/e,t[1]/e]:[0,0]},distance:(t,e)=>Math.hypot(t[0]-e[0],t[1]-e[1]),dot:(t,e)=>t[0]*e[0]+t[1]*e[1],length:t=>Math.hypot(t[0],t[1]),angle:(t,e)=>(t=n.normalize(t),e=n.normalize(e),Math.acos(n.dot(t,e))),skewX:(t,e)=>{t[0]+=Math.tan(e)*t[1]},skewY:(t,e)=>{t[1]+=Math.tan(e)*t[0]},squeezeX:(t,e)=>{t[1]+=t[1]*(t[0]*-e)},squeezeY:(t,e)=>{t[0]+=t[0]*(t[1]*e)},rotate:(t,e,r)=>{const n=t[0]-r[0],i=t[1]-r[1];t[0]=n*e[0]+i*e[1]+r[0],t[1]=n*e[2]+i*e[3]+r[1]},rotateX:(t,e,i)=>{r[0]=1,r[1]=0,r[2]=0,r[3]=Math.cos(i),n.rotate(t,r,e)},rotateY:(t,e,i)=>{r[0]=Math.cos(i),r[1]=0,r[2]=0,r[3]=1,n.rotate(t,r,e)},rotateZ:(t,e,i)=>{r[0]=Math.cos(i),r[1]=-Math.sin(i),r[2]=Math.sin(i),r[3]=Math.cos(i),n.rotate(t,r,e)},translate:(t,e)=>{t[0]+=e[0],t[1]+=e[1]},scale:(t,e)=>{t[0]*=e[0],t[1]*=e[1]},divide:(t,e)=>{t[0]/=e[0],t[1]/=e[1]},toString:t=>`x: ${t[0]}, y: ${t[1]}`,ZERO:Array.from([0,0]),ONE:Array.from([1,1])};e.default=n},348:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toVec3=e.toVec2=e.fromSkew=e.VEC2_ONE=e.VEC2_ZERO=e.VEC3_ONE=e.VEC3_ZERO=void 0;const n=r(887);e.VEC3_ZERO=[0,0,0],e.VEC3_ONE=[1,1,1],e.VEC2_ZERO=[0,0],e.VEC2_ONE=[1,1],n.glMatrix.setMatrixArrayType(Array),e.fromSkew=function(t,e){return t[0]=1,t[1]=Math.tan(e[1]),t[2]=0,t[3]=0,t[4]=Math.tan(e[0]),t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.toVec2=function(t){return Array.isArray(t)?[t[0],t[1]]:[t,t]},e.toVec3=function(t,e=0){return Array.isArray(t)?[t[0],t[1],e]:[t,t,e]}},888:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mod=e.PHI=e.PI2=e.log=void 0,e.log=(t,e)=>Math.log(t)/Math.log(e),e.PI2=2*Math.PI,e.PHI=(1+Math.sqrt(5))/2,e.mod=(t,e)=>{const r=t%e;return r<0?r+e:r}},658:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Adapt=e.Bounding=e.EAdaptMode=void 0;const n=r(700);var i;!function(t){t[t.None=0]="None",t[t.Scale=2]="Scale",t[t.Center=4]="Center",t[t.Fill=8]="Fill"}(i=e.EAdaptMode||(e.EAdaptMode={})),e.Bounding={empty:()=>({cx:0,cy:0,x:-1,y:-1,width:2,height:2}),clear:t=>{t[0]=void 0,t[1]=void 0,t[2]=void 0,t[3]=void 0},add:(t,e,r)=>{(void 0===t[0]||e<t[0])&&(t[0]=e),(void 0===t[2]||e>t[2])&&(t[2]=e),(void 0===t[1]||r<t[1])&&(t[1]=r),(void 0===t[3]||r>t[3])&&(t[3]=r)},sum:(t,e)=>{void 0!==e[0]&&void 0!==e[1]&&void 0!==e[2]&&void 0!==e[3]?void 0===t[0]||void 0===t[1]||void 0===t[2]||void 0===t[3]?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):(t[0]<e[0]&&(t[0]=e[0]),t[2]>e[2]&&(t[2]=e[2]),t[1]<e[1]&&(t[1]=e[1]),t[3]>e[3]&&(t[3]=e[3])):console.warn("[Urplfanze:Bounding] cannot sum bounding")},bind:(t,e)=>{void 0!==e[0]&&void 0!==e[1]&&void 0!==e[2]&&void 0!==e[3]?(t.x=e[0],t.y=e[1],t.width=e[2]-e[0],t.height=e[3]-e[1],t.cx=t.x+t.width/2,t.cy=t.y+t.height/2):console.warn("[Urplfanze:Bounding] cannot bind bounding")}};class o extends n.Modifier{constructor(t){super(),this.mode=t.mode||i.Fill,this.rect=t.rect}apply(t,e){return o.adapt(t,this.mode,this.rect)}static adapt(t,e,r){if(e===i.None)return Float32Array.from(t);const n=new Float32Array(t.length);r||(r=o.getBounding(t));const s=r.width>=2||r.height>=2||e>=i.Fill&&(r.width<2||r.height<2)?2/Math.max(r.width,r.height):1,a=e>=i.Center?r.cx:0,u=e>=i.Center?r.cy:0;for(let e=0,r=t.length;e<r;e+=2)n[e]=(t[e]-a)*s,n[e+1]=(t[e+1]-u)*s;return n}static getBounding(t,r){void 0===r&&(r=e.Bounding.empty());const n=[void 0,void 0,void 0,void 0];for(let r=0,i=t.length;r<i;r+=2)e.Bounding.add(n,t[r],t[r+1]);return e.Bounding.bind(r,n),r}}e.Adapt=o,o.MODES=i},364:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Close=void 0;const n=r(700);class i extends n.Modifier{constructor(){super()}apply(t,e,r){return i.call(t)}static call(t){const e=t.length;if(i.isClosed(t))return t;const r=new Float32Array(e+2);return r.set(t,0),r[e]=r[0],r[e+1]=r[1],r}static isClosed(t){const e=t.length;return t[0]===t[e-2]&&t[1]===t[e-1]}}e.Close=i},991:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mirror=void 0;const n=r(700);class i extends n.Modifier{constructor(t={x:!0,y:!0}){super(),this.x=!0===t.x,this.y=!0===t.y}apply(t,e){const r=t.length,n=new Float32Array(r*(this.x?2:1)*(this.y?2:1));if(this.x&&this.y){const e=r+r,i=e+r;for(let o=0;o<r;o+=2)n[o]=t[o]-1,n[o+1]=t[o+1]-1,n[r+o]=-1*t[r-2-o]+1,n[r+o+1]=t[r-2-o+1]-1,n[e+o]=-1*t[o]+1,n[e+o+1]=-1*t[o+1]+1,n[i+o]=t[r-2-o]-1,n[i+o+1]=-1*t[r-2-o+1]+1}else if(this.x)for(let e=0;e<r;e+=2)n[e]=t[e]-1,n[e+1]=t[e+1],n[r+e]=-1*t[r-2-e]+1,n[r+e+1]=t[r-2-e+1];else{if(!this.y)return t;for(let e=0;e<r;e+=2)n[e]=t[e],n[e+1]=t[e+1]-1,n[r+e]=t[r-2-e],n[r+e+1]=-1*t[r-2-e+1]+1}return n}}e.Mirror=i},700:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Modifier=void 0,e.Modifier=class{}},62:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Offset=void 0;const n=r(700);class i extends n.Modifier{constructor(t={from:0,to:void 0}){super(),this.from=t.from,this.to=t.to}apply(t,e){return t.subarray(this.from,this.to?this.to<0?t.length+this.to:this.to:void 0)}}e.Offset=i},785:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Smooth=void 0;const n=r(932),i=r(364),o=r(700);class s extends o.Modifier{constructor(t={}){super(),this.level=t.level||1;const e=Array.isArray(t.tension)?t.tension:[t.tension];this.tension=new Array(this.level).fill(.5).map(((t,r)=>n.clamp(0,1,e[r]||t))),this.level=this.level<1?1:this.level,this.closed=!0===t.closed}apply(t,e){if(e&&!i.Close.isClosed(t)){const e=t.length,r=new Float32Array(e+2);r.set(t,0),r[e]=t[0],r[e+1]=t[1],t=r}let r=t;for(let t=0,n=this.level;t<n;t++)r=s.smooth(r,this.tension[t],e||this.closed);return r}static smooth(t,e=.5,r=!1){const n=t.length,i=new Float32Array(2*(t.length-(r?1:0)));r||(i[0]=t[0],i[1]=t[1]);const o=.05+.4*e,s=1-o;let a=r?0:2;for(let e=0,r=n-2;e<r;e+=2,a+=4)i[a]=s*t[e]+o*t[e+2],i[a+1]=s*t[e+1]+o*t[e+3],i[a+2]=o*t[e]+s*t[e+2],i[a+3]=o*t[e+1]+s*t[e+3];return r?(i[a]=i[0],i[a+1]=i[1]):(i[a]=t[n-2],i[a+1]=t[n-1]),i}}e.Smooth=s},982:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Solidify=void 0;const n=r(700);class i extends n.Modifier{constructor(t={}){super(),this.closed=!0===t.closed,this.thickness=t.thickness||.2,this.error=t.error}apply(t,e){return i.solidify(t,this.thickness,this.closed,this.error)}static solidify(t,e,r=!1,n){const o=[],s=(e="number"==typeof e?[e]:e).length;let a,u,h=[[0,0],[0,0]],c=[[0,0],[0,0]];for(let r=0,f=0,l=t.length-2;r<l;r+=2,f++){a=0===r,u=r===l-2;const d={index:r+1,offset:r/l,count:l},p={index:r+2,offset:(r+1)/l,count:l},M="function"==typeof e?e(d):e[f%s],v="function"==typeof e?e(p):e[(f+1)%s],g=i.getOffsets(t[r],t[r+1],t[r+2],t[r+3],M),m=i.getOffsets(t[r],t[r+1],t[r+2],t[r+3],v),b=[t[r]+g[0],t[r+1]+g[1]],y=[t[r+2]+m[0],t[r+3]+m[1]],x=[t[r]-g[0],t[r+1]-g[1]],S=[t[r+2]-m[0],t[r+3]-m[1]];if(!a){const t=i.getIntersection(h[0],h[1],b,y,n);t&&(o.unshift(t[1]),o.unshift(t[0]));const e=i.getIntersection(c[0],c[1],x,S,n);e&&(o.push(e[0]),o.push(e[1]))}a&&(o.unshift(b[1]),o.unshift(b[0]),o.push(x[0]),o.push(x[1])),u&&(o.unshift(y[1]),o.unshift(y[0]),o.push(S[0]),o.push(S[1])),u||(h=[b,y],c=[x,S])}if(r){const e=t.length-2,r=o.length-2,n=.5*o[0]+.5*o[e],i=.5*o[1]+.5*o[e+1],s=.5*o[e+2]+.5*o[r],a=.5*o[e+3]+.5*o[r+1];o[0]=n,o[1]=i,o[e]=n,o[e+1]=i,o[e+2]=s,o[e+3]=a,o[r]=s,o[r+1]=a}return Float32Array.from(o)}static getOffsets(t,e,r,n,i){const o=r-t,s=n-e,a=i/(2*Math.sqrt(o*o+s*s));return[-a*s,a*o]}static getIntersection(t,e,r,n,i=1e-5){const o=(e[1]-t[1])/(e[0]-t[0]),s=(n[1]-r[1])/(n[0]-r[0]);if(Math.abs(o-s)<i)return;const a=t[1]-o*t[0],u=(a-(r[1]-s*r[0]))/(s-o);return[u,o*u+a]}}e.Solidify=i},301:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Subdivide=void 0;const n=r(700);class i extends n.Modifier{constructor(t={}){super(),this.level=t.level||1,this.level=this.level<1?1:this.level}apply(t,e){const r=this.level;let n=t;if(n&&n.length>0)for(let t=0;t<r;t++)n=i.subdivide(n,e);return n}static subdivide(t,e=!1){const r=t.length,n=new Float32Array(2*r-(e?0:2));for(let e=0;e<r;e+=2)if(0===e)n[0]=t[0],n[1]=t[1];else{const r=t[e-2],i=t[e-1],o=t[e],s=t[e+1],a=(o+r)/2,u=(s+i)/2;n[2*(e-1)]=a,n[2*(e-1)+1]=u,n[2*e]=o,n[2*e+1]=s}return e&&(n[2*(r-1)]=(t[0]+t[r-2])/2,n[2*(r-1)+1]=(t[1]+t[r-1])/2),n}}e.Subdivide=i},204:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Modifiers=void 0;const n=r(658),i=r(991),o=r(785),s=r(982),a=r(301),u=r(364),h=r(62),c={Adapt:n.Adapt,Mirror:i.Mirror,Smooth:o.Smooth,Solidify:s.Solidify,Subdivide:a.Subdivide,Close:u.Close,Offset:h.Offset};e.Modifiers=c},775:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=void 0;const n=r(107),i=r(15),o=r(485);class s extends o.ShapeBase{constructor(t){t.type=t.type||"Shape",super(t),t.shape instanceof i.SceneChild?this.shape=t.shape:console.warn("[Urpflanze:Shape] requires the 'shape' property to be instance of SceneChild,\nYou passed:",t.shape),this.shapeUseParent=!!t.shapeUseParent,this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}isStatic(){return super.isStatic()&&(!this.shape||this.shape.isStatic())}isStaticIndexed(){return super.isStaticIndexed()&&(!this.shape||this.shape.isStaticIndexed())}find(t){return this.id===t||this.name===t?this:this.shape?this.shape.find(t):null}getBufferLength(t){return this.bStatic&&this.buffer&&this.buffer.length>0?this.buffer.length:(this.shape?this.shape.getBufferLength(t):0)*this.getRepetitionCount()}generateBuffer(t,e){return this.shape?((this.shapeUseParent||this.shape.generateId!==t)&&(this.shapeUseParent&&this.shape.clearBuffer(!0,!1),this.shape.generate(t,!1,e)),this.shape.getBuffer()):s.EMPTY_BUFFER}getShapeBounding(){return this.shape?this.shape.getBounding():this.bounding}addIndex(t,e,r){if(this.shape){const n=this.shape.getIndexedBuffer()||[],i={shape:this,frameLength:t,singleRepetitionBounding:r,repetition:{type:e.type,angle:e.angle,index:e.index,count:e.count,offset:e.offset,row:{index:e.row.index,count:e.row.count,offset:e.row.offset},col:{index:e.col.index,count:e.col.count,offset:e.col.offset}}};for(let t=0,e=n.length;t<e;t++){const e={...n[t]},r=e.parent?s.setIndexedParent(e.parent,i):i;this.indexedBuffer.push({...e,parent:r})}}}static setIndexedParent(t,e){const r={...t};return r.parent=t.parent?s.setIndexedParent(t.parent,e):e,r}setShape(t){void 0===t?(this.shape=void 0,this.clearBuffer(!0,!0)):(this.scene&&n.Scene.propagateToChilden(t,this.scene),this.shape=t,this.shape.clearBuffer(!0,!0))}}e.Shape=s},485:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeBase=void 0;const n=r(887),i=r(46),o=r(348),s=r(271),a=r(888),u=r(658),h=r(932),c=r(15),f=n.mat4.create(),l=n.mat4.create(),d=n.mat4.create(),p=n.mat4.create();class M extends c.SceneChild{constructor(t={}){super(t),this.bIndexed=!1,this.indexedBuffer=[],this.bounding={cx:0,cy:0,x:-1,y:-1,width:2,height:2},this.props={distance:t.distance,repetitions:t.repetitions,rotateX:t.rotateX,rotateY:t.rotateY,rotateZ:t.rotateZ,skewX:t.skewX,skewY:t.skewY,squeezeX:t.squeezeX,squeezeY:t.squeezeY,displace:t.displace,translate:t.translate,scale:t.scale,transformOrigin:t.transformOrigin,perspective:t.perspective,perspectiveOrigin:t.perspectiveOrigin},this.vertexCallback=t.vertexCallback,this.boundingType=t.boundingType||i.EBoundingType.Fixed}isStatic(){const t=this.props;return"function"!=typeof t.repetitions&&"function"!=typeof t.distance&&"function"!=typeof t.displace&&"function"!=typeof t.scale&&"function"!=typeof t.translate&&"function"!=typeof t.skewX&&"function"!=typeof t.skewY&&"function"!=typeof t.squeezeX&&"function"!=typeof t.squeezeY&&"function"!=typeof t.rotateX&&"function"!=typeof t.rotateY&&"function"!=typeof t.rotateZ&&"function"!=typeof t.transformOrigin&&"function"!=typeof t.perspective&&"function"!=typeof t.perspectiveOrigin}isStaticIndexed(){return"function"!=typeof this.props.repetitions}getProp(t,e,r){let n=this.props[t];return"function"==typeof n&&(n=n(e)),void 0===n||Number.isNaN(n)?r:n}setProp(t,e,r=!1){"string"==typeof t?(r=r||"repetitions"==t,this.props[t]=e):(r=r||"repetitions"in t,Object.keys(t).forEach((e=>this.props[e]=t[e]))),this.clearBuffer(r,!0)}clearBuffer(t=!1,e=!0){if(this.buffer=void 0,t&&(this.bIndexed=!1,this.indexedBuffer=[]),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed(),e&&this.scene&&!this.scene.isFirstLevelChild(this)){const r=this.scene.getParentsOfSceneChild(this);r.length>0&&r[r.length-1].clearBuffer(t,e)}}generate(t=0,e=!1,r){var c,v;if(this.buffer&&this.bStatic)return;this.generateId=t,this.bStaticIndexed&&this.bIndexed||(this.indexedBuffer=[]);const g=M.getEmptyPropArguments(this,r),m=g.repetition,b=this.getProp("repetitions",g,1),y=Array.isArray(b)?i.ERepetitionType.Matrix:i.ERepetitionType.Ring,x=Array.isArray(b)?b[0]*(null!==(c=b[1])&&void 0!==c?c:b[0]):b,S=Array.isArray(b)?b[0]:x,P=Array.isArray(b)?null!==(v=b[1])&&void 0!==v?v:b[0]:1,w=m.row;w.count=S;const B=m.col;B.count=P,m.count=x,m.col.count=P,m.row.count=S,m.type=y;let I=0;const R=[];let O=0;const A=n.vec2.fromValues((P-1)/2,(S-1)/2),L=this.scene?[this.scene.anchor[0],this.scene.anchor[1],0]:[0,0,0],E=[void 0,void 0,void 0,void 0],_=[void 0,void 0,void 0,void 0];for(let r=0;r<S;r++)for(let c=0;c<P;c++,O++){m.index=O+1,m.offset=x>1?O/(x-1):1,m.angle=y===i.ERepetitionType.Ring?a.PI2/x*O:0,B.index=c+1,B.offset=P>1?c/(P-1):1,w.index=r+1,w.offset=S>1?r/(S-1):1;const M=this.generateBuffer(t,g),v=M.length,b=this.getShapeBounding();R[O]=new Float32Array(v),I+=v;{const t=o.toVec2(this.getProp("distance",g,o.VEC2_ZERO)),a=this.getProp("displace",g,0),x=o.toVec3(this.getProp("scale",g,o.VEC2_ONE),1),S=o.toVec3(this.getProp("translate",g,o.VEC2_ZERO),0),P=this.getProp("skewX",g,0),w=this.getProp("skewY",g,0),B=this.getProp("squeezeX",g,0),I=this.getProp("squeezeY",g,0),E=this.getProp("rotateX",g,0),C=this.getProp("rotateY",g,0),F=this.getProp("rotateZ",g,0),j=h.clamp(0,1,this.getProp("perspective",g,0)),q=o.toVec3(this.getProp("perspectiveOrigin",g,o.VEC2_ZERO),0),T=o.toVec3(this.getProp("transformOrigin",g,o.VEC2_ZERO),0);let D;switch(y){case i.ERepetitionType.Ring:D=n.vec3.fromValues(t[0],0,0),n.vec3.rotateZ(D,D,o.VEC3_ZERO,m.angle+a);break;case i.ERepetitionType.Matrix:D=n.vec3.fromValues(t[1]*(c-A[0]),t[0]*(r-A[1]),0)}const V=j>0?Math.max(b.width,b.height)/2:1,k=j>0?V+10*V*(1-j):0,z=this.boundingType!==i.EBoundingType.Relative||0!==b.cx||0!==b.cy||0!==j||0!==T[0]||0!==T[1],U=0!==q[0]||0!==q[1];z&&(this.boundingType===i.EBoundingType.Relative?(T[0]=T[0]*(b.width/2)+b.cx,T[1]=T[1]*(b.height/2)+b.cy):(T[0]*=b.width/2,T[1]*=b.height/2),T[2]=k),n.mat4.identity(l),z&&n.mat4.translate(l,l,T),0===S[0]&&0===S[1]||n.mat4.translate(l,l,S),0===P&&0===w||(o.fromSkew(f,[P,w]),n.mat4.multiply(l,l,f)),0!==E&&n.mat4.rotateX(l,l,E),0!==C&&n.mat4.rotateY(l,l,C),0!==F&&n.mat4.rotateZ(l,l,F),1===x[0]&&1===x[1]||n.mat4.scale(l,l,x),z&&n.mat4.translate(l,l,n.vec3.scale(T,T,-1)),k>0&&(U&&(this.boundingType===i.EBoundingType.Relative?(q[0]=q[0]*(b.width/2)+b.cx,q[1]=q[1]*(b.height/2)+b.cy):(q[0]*=b.width/2,q[1]*=b.height/2),q[2]=0),n.mat4.perspective(d,-Math.PI/2,1,0,1/0)),n.mat4.identity(p),n.mat4.translate(p,p,D),e&&n.mat4.translate(p,p,L),y===i.ERepetitionType.Ring&&n.mat4.rotateZ(p,p,m.angle+a),u.Bounding.clear(_);for(let t=0;t<v;t+=2){const e=[M[t],M[t+1],k];if(0!==B&&s.default.squeezeX(e,B),0!==I&&s.default.squeezeY(e,I),n.vec3.transformMat4(e,e,l),k>0&&(U&&n.vec3.add(e,e,q),n.vec3.transformMat4(e,e,d),n.vec3.scale(e,e,k),U&&n.vec3.sub(e,e,q)),n.vec3.transformMat4(e,e,p),this.vertexCallback){const r=t/2,n=v/2,i={index:r+1,count:n,offset:n>1?r/(n-1):1};this.vertexCallback(e,i,g)}R[O][t]=e[0],R[O][t+1]=e[1],u.Bounding.add(_,e[0],e[1])}}u.Bounding.sum(E,_);const C={cx:0,cy:0,x:-1,y:-1,width:2,height:2};u.Bounding.bind(C,_),this.bStaticIndexed&&this.bIndexed||this.addIndex(v,m,C)}u.Bounding.bind(this.bounding,E),this.buffer=new Float32Array(I);for(let t=0,e=0,r=R.length;t<r;e+=R[t].length,t++)this.buffer.set(R[t],e);this.bIndexed=!0}getBounding(){return this.bounding}getRepetitionCount(){var t;const e=this.getProp("repetitions",void 0,1);return Array.isArray(e)?e[0]*(null!==(t=e[1])&&void 0!==t?t:e[0]):e}getBuffer(){return this.buffer}getIndexedBuffer(){return this.indexedBuffer}static getIndexParentLevel(t){if(void 0===t.parent)return 0;let e=t.parent,r=1;for(;void 0!==e.parent;)r++,e=e.parent;return r}stream(t){if(this.buffer&&this.indexedBuffer)for(let e=0,r=0,n=this.indexedBuffer.length;e<n;e++){const i=this.indexedBuffer[e];t({buffer:this.buffer,frameLength:i.frameLength,frameBufferIndex:r,currentIndexing:i,currentShapeIndex:e,totalShapes:n}),r+=i.frameLength}}static getEmptyPropArguments(t,e){return{repetition:{type:i.ERepetitionType.Ring,angle:0,index:1,offset:1,count:1,row:{index:1,offset:1,count:1},col:{index:1,offset:1,count:1}},shape:t,parent:e}}}e.ShapeBase=M,M.EMPTY_BUFFER=new Float32Array(0),M.getEmptySimpleRepetition=()=>({index:1,offset:1,count:1}),M.getEmptyRepetition=()=>({type:i.ERepetitionType.Ring,angle:0,...M.getEmptySimpleRepetition(),row:M.getEmptySimpleRepetition(),col:M.getEmptySimpleRepetition()})},425:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeBuffer=void 0;const n=r(658),i=r(436);class o extends i.ShapePrimitive{constructor(t={}){var e,r;t.type=t.type||"ShapeBuffer",t.adaptMode=null!==(e=t.adaptMode)&&void 0!==e?e:n.EAdaptMode.Scale,super(t),this.adaptMode=null!==(r=t.adaptMode)&&void 0!==r?r:n.EAdaptMode.Fill,void 0===t.shape?(console.warn("[Urpflanze:ShapeBuffer] ShapeBuffer require a buffer passed from `shape` property"),this.shape=o.EMPTY_BUFFER):this.shape="function"!=typeof t.shape?n.Adapt.adapt(t.shape,this.adaptMode):t.shape,this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}isStatic(){return"function"!=typeof this.shape&&super.isStatic()}isStaticIndexed(){return"function"!=typeof this.shape&&super.isStaticIndexed()}clearBuffer(t=!1,e=!0){super.clearBuffer(t,e),this.shapeBuffer=void 0}bindBuffer(t){const e=this.getRepetitionSideLength(t),r=this.applyModifiers(Float32Array.from("function"==typeof this.shape?this.shape(t):this.shape),t),i=[void 0,void 0,void 0,void 0];for(let t=0,o=r.length;t<o;t+=2)r[t]=r[t]*e[0],r[t+1]=r[t+1]*e[1],n.Bounding.add(i,r[t],r[t+1]);n.Bounding.bind(this.currentGenerationPrimitiveBounding,i),this.shapeBuffer=r}getBufferLength(){return this.buffer&&this.buffer.length>0?this.buffer.length:this.shape.length*this.getRepetitionCount()}generateBuffer(t,e){return void 0!==this.shapeBuffer&&"function"!=typeof this.props.sideLength&&"function"!=typeof this.shape||this.bindBuffer(e),this.shapeBuffer}setShape(t){this.shape=n.Adapt.adapt(t,this.adaptMode),this.clearBuffer(!0)}getAdaptMode(){return this.adaptMode}static getBuffer(t={}){const e=new this({...t,sideLength:t.sideLength||1});return e.generate(),e.getBuffer()||new Float32Array}}e.ShapeBuffer=o},549:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeFollow=void 0;const n=r(775);class i extends n.Shape{constructor(t){t.type=t.type||"ShapeFollow",super(t),this.follow=t.follow||t.shape,this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed(),this.shapeUseFollow=!!t.shapeUseFollow}clearBuffer(t=!1,e=!0){t&&(this.shapeFollowBuffer=void 0),super.clearBuffer(t,e)}isStatic(){return(!this.follow||this.follow.isStatic())&&super.isStatic()}isStaticIndexed(){return(!this.follow||this.follow.isStaticIndexed())&&super.isStaticIndexed()}generateBuffer(t,e){return this.shape&&this.follow?((void 0===this.shapeFollowBuffer||this.shapeUseParent||this.shape.generateId!==t||this.follow.generateId!==t)&&this.bindBuffer(t,e),this.shapeFollowBuffer):n.Shape.EMPTY_BUFFER}bindBuffer(t,e){const r=this.follow;r.generate(t,!1,e);const n=r.getBuffer(),i={...e,follow:{index:1,offset:1,count:1}},o=this.shape;o.generate(t,!1,i);let s=o.getBuffer();const a=s.length,u=new Float32Array(a*(n.length/2)),h=n.length/2;for(let e=0;e<h;e++){const r={index:e+1,offset:h>1?e/(h-1):1,count:h};this.shapeUseFollow&&(i.follow=r,o.generate(t,!1,i),s=o.getBuffer());const c=e*a,f=2*e,l=n[f],d=n[f+1];for(let t=0,e=s.length;t<e;t+=2)u[c+t]=l+s[t],u[c+t+1]=d+s[t+1]}this.shapeFollowBuffer=u}addIndex(t,e,r){if(this.shape){const i={shape:this,frameLength:t,singleRepetitionBounding:r,repetition:{type:e.type,angle:e.angle,index:e.index,count:e.count,offset:e.offset,row:{index:e.row.index,count:e.row.count,offset:e.row.offset},col:{index:e.col.index,count:e.col.count,offset:e.col.offset}},follow:{index:1,offset:1,count:1}},o=this.shape.getIndexedBuffer()||[];for(let t=0,e=o.length;t<e;t++)for(let t=0,e=this.follow.getBuffer().length/2;t<e;t++){const r=e>1?t/(e-1):1;for(let s=0,a=o.length;s<a;s++){const a={...o[s]},u={...i,follow:{index:t+1,offset:r,count:e}},h=a.parent?n.Shape.setIndexedParent(a.parent,u):u;this.indexedBuffer.push({...a,parent:h})}}}}static summmation(t,e){if(1===t)return 1;let r=1;for(let n=1;n<t;n++)r+=e**n;return r}static getEmptyRecursion(){return{index:1,offset:1,count:1,level:{index:1,offset:1,count:1}}}}e.ShapeFollow=i},210:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeLoop=void 0;const n=r(888),i=r(658),o=r(436),s=r(485);class a extends o.ShapePrimitive{constructor(t={},e=!1){t.type=t.type||"ShapeLoop",super(t),this.loopDependencies=(t.loopDependencies||[]).concat("sideLength"),this.props.loop=t.loop,e||(this.loop={start:0,end:n.PI2,inc:n.PI2/10,vertex:()=>[0,0]},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed())}isStaticLoop(){if(this.loopDependencies.includes("propArguments"))return!1;for(let t=0,e=this.loopDependencies.length;t<e;t++)if("function"==typeof this.props[this.loopDependencies[t]])return!1;return!0}isStatic(){return this.bStaticLoop&&super.isStatic()}isStaticIndexed(){return super.isStaticIndexed()&&(void 0===this.props.loop||"function"!=typeof this.props.loop.start&&"function"!=typeof this.props.loop.end&&"function"!=typeof this.props.loop.inc)}clearBuffer(t=!1,e=!0){this.bStaticLoop=this.isStaticLoop(),t&&(this.currentOrSingleLoopBuffer=void 0),super.clearBuffer(t,e)}setProp(t,e){let r=!1;const n="string"==typeof t?{[t]:e}:t;for(let t=this.loopDependencies.length-1;t>=0;t--)if(this.loopDependencies[t]in n){r=!0;break}"loop"in n&&(n.loop={...this.props.loop,...n.loop},r=!0),super.setProp(n,e,r)}getBufferLength(t){if(this.bStatic&&void 0!==this.buffer)return this.buffer.length;if(this.bStaticLoop&&void 0!==this.currentOrSingleLoopBuffer)return this.currentOrSingleLoopBuffer.length*this.getRepetitionCount();const{count:e}=this.getLoop(t||s.ShapeBase.getEmptyPropArguments(this));return this.getRepetitionCount()*e*2}generateBuffer(t,e){return this.bStaticLoop?("function"!=typeof this.props.sideLength&&void 0!==this.currentOrSingleLoopBuffer||(this.currentOrSingleLoopBuffer=this.generateLoopBuffer(e)),this.currentOrSingleLoopBuffer):this.generateLoopBuffer(e)}generateLoopBuffer(t){const{start:e,inc:r,count:n}=this.getLoop(t),o=this.getRepetitionSideLength(t),s=this.props.loop&&this.props.loop.vertex?this.props.loop.vertex:this.loop.vertex,a={index:0,offset:0,current:0,count:n},u=a.count,h=new Float32Array(2*u);for(let n=0,i=0;n<u;n++,i+=2){const o=e+r*n,u=a.count>1?n/(a.count-1):1;a.current=o,a.index=n+1,a.offset=u;const c=s(a,t);h[i]=c[0],h[i+1]=c[1]}const c=[void 0,void 0,void 0,void 0],f=this.applyModifiers(h,t);for(let t=0,e=f.length;t<e;t+=2)f[t]=f[t]*o[0],f[t+1]=f[t+1]*o[1],i.Bounding.add(c,f[t],f[t+1]);return i.Bounding.bind(this.currentGenerationPrimitiveBounding,c),f}getLoop(t){var e,r,n,i,o,s;let a=null!==(r=null===(e=this.props.loop)||void 0===e?void 0:e.start)&&void 0!==r?r:this.loop.start,u=null!==(i=null===(n=this.props.loop)||void 0===n?void 0:n.end)&&void 0!==i?i:this.loop.end,h=null!==(s=null===(o=this.props.loop)||void 0===o?void 0:o.inc)&&void 0!==s?s:this.loop.inc;a="function"==typeof a?a(t):a,u="function"==typeof u?u(t):u,h="function"==typeof h?h(t):h;const c=Math.ceil((u-a)/h);return{start:a,end:u,inc:h,count:c<=0?0:c}}setShape(t){this.setProp("loop",t)}static getBuffer(t){const e=new this({...t,sideLength:t.sideLength||1});return e.generate(),e.getBuffer()||new Float32Array}}e.ShapeLoop=a,a.PId2=Math.PI/2},436:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapePrimitive=void 0;const n=r(348),i=r(485),o=r(700),s=r(658);class a extends i.ShapeBase{constructor(t={}){var e;super(t),this.currentGenerationPrimitiveBounding=s.Bounding.empty(),this.props.sideLength=void 0===t.sideLength?void 0:"function"==typeof t.sideLength?t.sideLength:n.toVec2(t.sideLength),this.drawer=t.drawer||{},this.modifiers=t.modifiers,this.bClosed=null===(e=t.bClosed)||void 0===e||e}isStatic(){return"function"!=typeof this.props.sideLength&&super.isStatic()}getRepetitionSideLength(t){return this.bStatic?(void 0===this.props.sideLength?this.props.sideLength=[50,50]:"number"==typeof this.props.sideLength&&(this.props.sideLength=[this.props.sideLength,this.props.sideLength]),this.props.sideLength):n.toVec2(this.getProp("sideLength",t,[50,50]))}applyModifiers(t,e){if(void 0===this.modifiers)return t;let r=t;const n=Array.isArray(this.modifiers)?this.modifiers:[this.modifiers];for(let t=0,i=n.length;t<i;t++)r=(n[t]instanceof o.Modifier?n[t]:n[t](e)).apply(r,this.bClosed,this);return r}getShapeBounding(){return this.currentGenerationPrimitiveBounding}addIndex(t,e,r){const n={shape:this,frameLength:t,singleRepetitionBounding:r,repetition:{type:e.type,angle:e.angle,index:e.index,count:e.count,offset:e.offset,row:{index:e.row.index,count:e.row.count,offset:e.row.offset},col:{index:e.col.index,count:e.col.count,offset:e.col.offset}}};this.indexedBuffer.push(n)}isClosed(){return this.bClosed}setClosed(t){this.bClosed=t}}e.ShapePrimitive=a},961:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeRecursive=void 0;const n=r(775);class i extends n.Shape{constructor(t){t.type=t.type||"ShapeRecursive",super(t),this.props.recursions=t.recursions||1,this.props.recursionScale=t.recursionScale||2,this.props.recursionVertex=t.recursionVertex||0,this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed(),this.shapeUseRecursion=!!t.shapeUseRecursion}clearBuffer(t=!1,e=!0){t&&(this.shapeRecursiveBuffer=void 0),super.clearBuffer(t,e)}isStatic(){return"function"!=typeof this.props.recursions&&"function"!=typeof this.props.recursionScale&&"function"!=typeof this.props.recursionVertex&&super.isStatic()}isStaticIndexed(){return"function"!=typeof this.props.recursions&&"function"!=typeof this.props.recursionVertex&&super.isStaticIndexed()}generateBuffer(t,e){return this.shape?((void 0===this.shapeRecursiveBuffer||this.shapeUseParent||this.shape.generateId!==t)&&this.bindBuffer(t,e),this.shapeRecursiveBuffer):n.Shape.EMPTY_BUFFER}bindBuffer(t,e){const r=Math.floor(this.getProp("recursions",e,1)),n=Math.floor(this.getProp("recursionVertex",e,0)),o=this.getProp("recursionScale",e,2),s=this.shape;let a={index:1,offset:1,count:1,level:{index:1,offset:r>1?0:1,count:1}};const u={...e,recursion:a};s.generate(t,!1,u);const h=s.getBuffer();if(r<=1)return void(this.shapeRecursiveBuffer=h);let c=h;const f=[a];let l=0,d=1;const p=c.length,M=p/2,v=n<=0?M:Math.min(n,M),g=0===n?1:M/Math.min(n,M),m=new Float32Array(i.summmation(r,v)*p);for(let t=0;t<p;t+=2)m[t]=c[t],m[t+1]=c[t+1];for(let e=1;e<r;e++){const n=r>1?e/(r-1):1,h=i.summmation(e,v)*p,M=e-1,b=0===M?0:i.summmation(M,v)*p;for(let i=0,M=v**e;i<M;i++,d++){a={index:i+1,offset:M>1?i/(M-1):1,count:M,level:{index:e+1,offset:n,count:r},parent:f[l]},f.push(a),this.shapeUseRecursion&&(u.recursion=a,s.generate(t,!1,u),c=s.getBuffer());const y=h+i*p,x=Math.floor(b+2*i*g),S=m[x],P=m[x+1],w=o**e;for(let t=0,e=p;t<e;t+=2){const e=c[t]/w,r=c[t+1]/w;m[y+t]=S+e,m[y+t+1]=P+r}d%v==0&&(l+=1)}}this.shapeRecursiveBuffer=m}addIndex(t,e,r){if(this.shape){const i={repetition:e,shape:this},o=Math.floor(this.getProp("recursions",i,1)),s=Math.floor(this.getProp("recursionVertex",i,0)),a={shape:this,frameLength:t,singleRepetitionBounding:r,repetition:{type:e.type,angle:e.angle,index:e.index,count:e.count,offset:e.offset,row:{index:e.row.index,count:e.row.count,offset:e.row.offset},col:{index:e.col.index,count:e.col.count,offset:e.col.offset}},recursion:{index:1,offset:1,count:1,level:{index:1,offset:o>1?0:1,count:o}}},u=this.shape.getIndexedBuffer()||[];for(let t=0,e=u.length;t<e;t++){const e={...u[t]},r={index:1,offset:1,count:1,level:{index:1,offset:o>1?0:1,count:o}},i={...a,recursion:r},s=e.parent?n.Shape.setIndexedParent(e.parent,i):i;this.indexedBuffer.push({...e,parent:s})}if(o>1){const t=this.shape.getBufferLength({...i,parent:{...a}})/2,e=s<=0?t:Math.min(s,t),r=this.indexedBuffer.map((t=>[t.parent.recursion]));let h=0,c=1;for(let t=1;t<o;t++){const i=o>1?t/(o-1):1;for(let s=0,f=e**t;s<f;s++,c++){const l=f>1?s/(f-1):1;for(let d=0,p=u.length;d<p;d++){const p={...u[d]},M={index:s+1,offset:l,count:f,level:{index:t+1,offset:i,count:o},parent:r[d][h]},v={...a,recursion:M},g=p.parent?n.Shape.setIndexedParent(p.parent,v):v;this.indexedBuffer.push({...p,parent:g}),r[d].push(M),c%e==0&&(h+=1)}}}}}}static summmation(t,e){if(1===t)return 1;let r=1;for(let n=1;n<t;n++)r+=e**n;return r}static getEmptyRecursion(){return{index:1,offset:1,count:1,level:{index:1,offset:1,count:1}}}}e.ShapeRecursive=i},252:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;const n=r(888),i=r(210);class o extends i.ShapeLoop{constructor(t={}){t.type="Circle",super(t,!0),this.loop={start:0,end:n.PI2,inc:t=>{const e=this.getRepetitionSideLength(t);return 1/Math.pow(e[0]*e[1],.25)*i.ShapeLoop.PId2},vertex:t=>[Math.cos(t.current),Math.sin(t.current)]},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}}e.Circle=o},702:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;const n=r(658),i=r(425);class o extends i.ShapeBuffer{constructor(t={}){t.type="Line",t.shape=[-1,0,1,0],t.adaptMode=n.EAdaptMode.None,t.bClosed=!1,super(t)}static toPolygon(t,e){const r=[];if(!Array.isArray(e)){const r=e,n=t.length/2;e=new Array(n);for(let t=0;t<n;t++)e[t]=r}function n(t,e,r,n,i){const o=r-t,s=n-e,a=i/(2*Math.sqrt(o*o+s*s));return[-a*s,a*o]}function i(t,e,r,n){const i=(e[1]-t[1])/(e[0]-t[0]),o=(n[1]-r[1])/(n[0]-r[0]);if(Math.abs(i-o)<1e-5)return;const s=t[1]-i*t[0],a=(s-(r[1]-o*r[0]))/(o-i);return[a,i*a+s]}let o,s,a=[[0,0],[0,0]],u=[[0,0],[0,0]];for(let h=0,c=t.length-2;h<c;h+=2){o=0===h,s=h===c-2;const f=n(t[h],t[h+1],t[h+2],t[h+3],e[h]),l=[t[h]+f[0],t[h+1]+f[1]],d=[t[h+2]+f[0],t[h+3]+f[1]],p=[t[h]-f[0],t[h+1]-f[1]],M=[t[h+2]-f[0],t[h+3]-f[1]];if(!o){const t=i(a[0],a[1],l,d);t&&(r.unshift(t[1]),r.unshift(t[0]));const e=i(u[0],u[1],p,M);e&&(r.push(e[0]),r.push(e[1]))}o&&(r.unshift(l[1]),r.unshift(l[0]),r.push(p[0]),r.push(p[1])),s&&(r.unshift(d[1]),r.unshift(d[0]),r.push(M[0]),r.push(M[1])),s||(a=[l,d],u=[p,M])}return Float32Array.from(r)}}e.Line=o},575:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lissajous=void 0;const n=r(888),i=r(210);class o extends i.ShapeLoop{constructor(t={}){t.type="Lissajous",t.loopDependencies=(t.loopDependencies||[]).concat(["wx","wy","wz"]),super(t,!0),this.props.wx=t.wx||1,this.props.wy=t.wy||2,this.props.wz=t.wz||0,this.loop={start:0,end:n.PI2,inc:t=>{const e=this.getProp("wx",t),r=this.getProp("wy",t),n=e==r?i.ShapeLoop.PId2:.5-.01*Math.min(49,e+r),o=this.getRepetitionSideLength(t);return 1/Math.pow(o[0]*o[1],.25)*n},vertex:t=>this.wx===this.wy?[Math.cos(t.current+this.wz),Math.sin(t.current)]:[Math.cos(this.wx*t.current+this.wz),Math.sin(this.wy*t.current)]},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}generateLoopBuffer(t){return this.wx=this.getProp("wx",t,1),this.wy=this.getProp("wy",t,2),this.wz=this.getProp("wz",t,2),super.generateLoopBuffer(t)}}e.Lissajous=o},873:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;const n=r(888),i=r(210);class o extends i.ShapeLoop{constructor(t={}){t.type=t.type||"Polygon",t.loopDependencies=(t.loopDependencies||[]).concat(["sideNumber"]),super(t,!0),this.props.sideNumber=t.sideNumber,this.loop={start:0,end:n.PI2,inc:t=>n.PI2/this.getProp("sideNumber",t,5),vertex:t=>[Math.cos(t.current),Math.sin(t.current)]},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}}e.Polygon=o},478:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rect=void 0;const n=r(658),i=r(425);class o extends i.ShapeBuffer{constructor(t={}){t.type="Rect",t.shape=[1,1,-1,1,-1,-1,1,-1],t.adaptMode=n.EAdaptMode.None,super(t)}}e.Rect=o},710:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rose=void 0;const n=r(888),i=r(210);class o extends i.ShapeLoop{constructor(t={}){var e,r;t.type="Rose",t.loopDependencies=(t.loopDependencies||[]).concat(["n","d"]),super(t,!0),this.props.n=null!==(e=t.n)&&void 0!==e?e:1,this.props.d=null!==(r=t.d)&&void 0!==r?r:2,this.loop={start:0,end:t=>o.getFinalAngleFromK(this.getProp("n",t),this.getProp("d",t)),inc:t=>{const e=this.getProp("n",t),r=this.getProp("d",t),i=this.getRepetitionSideLength(t),o=Math.pow(i[0]*i[1],.45),s=r<e?e/r:1.5;return n.PI2/(o*s)},vertex:t=>{const e=Math.cos(this.k*t.current);return[e*Math.cos(t.current),e*Math.sin(t.current)]}},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}generateLoopBuffer(t){return this.k=this.getProp("n",t)/this.getProp("d",t),super.generateLoopBuffer(t)}static getFinalAngleFromK(t,e){if(t==e)return n.PI2;const r=t/e,i=t*e;return Number.isInteger(r)||r%.5!=0?Math.PI*e*(i%2==0?2:1):4*Math.PI}}e.Rose=o},82:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Spiral=void 0;const n=r(888),i=r(210);class o extends i.ShapeLoop{constructor(t={}){var e,r,i;t.type="Spiral",t.bClosed=!1,t.loopDependencies=(t.loopDependencies||[]).concat(["twists","twistsStart","spiral"]),super(t,!0),this.props.spiral=null!==(e=t.spiral)&&void 0!==e?e:o.types.ARCHIMEDE,this.props.twists=null!==(r=t.twists)&&void 0!==r?r:2,this.props.twistsStart=null!==(i=t.twistsStart)&&void 0!==i?i:0,this.loop={start:t=>n.PI2*this.getProp("twistsStart",t),end:t=>n.PI2*(this.getProp("twistsStart",t)+this.getProp("twists",t)),inc:t=>{const e=this.getProp("twists",t),r=n.PI2*e,i=this.getRepetitionSideLength(t);return r/((4+Math.sqrt(i[0]*i[1]))*e)},vertex:t=>{const e=this.r(t.current);return[e*Math.cos(t.current),e*Math.sin(t.current)]}},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}generateLoopBuffer(t){return this.spiral=this.getProp("spiral",t),this.r=o.getRFromTSpiralType(this.spiral),super.generateLoopBuffer(t)}static getRFromTSpiralType(t){switch(t){case o.types.ARCHIMEDE:return t=>t/10;case o.types.HYPERBOLIC:return t=>1/t*3;case o.types.FERMAT:return t=>t**.5/3;case o.types.LITUUS:return t=>t**-.5;case o.types.LOGARITHMIC:return t=>Math.E**(.2*t)/10}return t=>t}}e.Spiral=o,o.types={ARCHIMEDE:"ARCHIMEDE",HYPERBOLIC:"HYPERBOLIC",FERMAT:"FERMAT",LITUUS:"LITUUS",LOGARITHMIC:"LOGARITHMIC"}},490:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Star=void 0;const n=r(888),i=r(210);class o extends i.ShapeLoop{constructor(t={}){t.type=t.type||"Polygon",t.loopDependencies=(t.loopDependencies||[]).concat(["spikes","innerRadius"]),super(t,!0),this.props.spikes=t.spikes,this.props.innerRadius=t.innerRadius,this.loop={start:0,end:n.PI2,inc:t=>this.inc,vertex:t=>{const e=Math.PI/this.spikes*t.index,r=t.index%2==0?1:this.innerRadius;return[Math.cos(e)*r,Math.sin(e)*r]}},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}generateLoopBuffer(t){return this.spikes=this.getProp("spikes",t,5),this.innerRadius=this.getProp("innerRadius",t,.5),this.inc=Math.PI/this.spikes,super.generateLoopBuffer(t)}}e.Star=o},845:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SuperShape=void 0;const n=r(888),i=r(210);class o extends i.ShapeLoop{constructor(t={}){var e,r,i,o,s,a;t.type="SuperShape",t.loopDependencies=(t.loopDependencies||[]).concat(["a","b","m","n1","n2","n3"]),super(t,!0),this.props.a=null!==(e=t.a)&&void 0!==e?e:1,this.props.b=null!==(r=t.b)&&void 0!==r?r:1,this.props.m=null!==(i=t.m)&&void 0!==i?i:6,this.props.n1=null!==(o=t.n1)&&void 0!==o?o:1,this.props.n2=null!==(s=t.n2)&&void 0!==s?s:1,this.props.n3=null!==(a=t.n3)&&void 0!==a?a:1,this.loop={start:0,end:n.PI2,inc:t=>{const e=this.getRepetitionSideLength(t);return Math.PI/Math.pow(e[0]*e[1],.5)},vertex:t=>{const e=t.current,r=this.m*e/4,n=(Math.abs(Math.cos(r)/this.a)**this.n2+Math.abs(Math.sin(r)/this.b)**this.n3)**(1/this.n1),i=0===n?1:1/n;return[i*Math.cos(e),i*Math.sin(e)]}},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}generateLoopBuffer(t){return this.a=this.getProp("a",t),this.b=this.getProp("b",t),this.m=this.getProp("m",t),this.n1=this.getProp("n1",t),this.n2=this.getProp("n2",t),this.n3=this.getProp("n3",t),super.generateLoopBuffer(t)}}e.SuperShape=o},123:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Triangle=void 0;const n=r(658),i=r(425);class o extends i.ShapeBuffer{constructor(t={}){t.type="Triangle",t.shape=[1,0,-1,1,-1,-1],t.adaptMode=n.EAdaptMode.None,super(t)}}e.Triangle=o},46:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(574),e),i(r(636),e),i(r(345),e),i(r(920),e),i(r(676),e),i(r(300),e),i(r(273),e),i(r(511),e)},574:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},636:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},345:(t,e)=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.ERepetitionType=void 0,(r=e.ERepetitionType||(e.ERepetitionType={}))[r.Ring=1]="Ring",r[r.Matrix=2]="Matrix"},920:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},676:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},300:(t,e)=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.EBoundingType=void 0,(r=e.EBoundingType||(e.EBoundingType={}))[r.Relative=1]="Relative",r[r.Fixed=2]="Fixed"},273:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},511:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},887:(t,e,r)=>{"use strict";r.r(e),r.d(e,{glMatrix:()=>n,mat2:()=>i,mat2d:()=>o,mat3:()=>s,mat4:()=>a,quat:()=>c,quat2:()=>f,vec2:()=>l,vec3:()=>u,vec4:()=>h});var n={};r.r(n),r.d(n,{ARRAY_TYPE:()=>p,EPSILON:()=>d,RANDOM:()=>M,equals:()=>b,setMatrixArrayType:()=>v,toRadian:()=>m});var i={};r.r(i),r.d(i,{LDU:()=>T,add:()=>D,adjoint:()=>O,clone:()=>x,copy:()=>S,create:()=>y,determinant:()=>A,equals:()=>z,exactEquals:()=>k,frob:()=>q,fromRotation:()=>C,fromScaling:()=>F,fromValues:()=>w,identity:()=>P,invert:()=>R,mul:()=>N,multiply:()=>L,multiplyScalar:()=>U,multiplyScalarAndAdd:()=>Y,rotate:()=>E,scale:()=>_,set:()=>B,str:()=>j,sub:()=>Z,subtract:()=>V,transpose:()=>I});var o={};r.r(o),r.d(o,{add:()=>ht,clone:()=>H,copy:()=>G,create:()=>X,determinant:()=>J,equals:()=>pt,exactEquals:()=>dt,frob:()=>ut,fromRotation:()=>it,fromScaling:()=>ot,fromTranslation:()=>st,fromValues:()=>K,identity:()=>Q,invert:()=>$,mul:()=>Mt,multiply:()=>tt,multiplyScalar:()=>ft,multiplyScalarAndAdd:()=>lt,rotate:()=>et,scale:()=>rt,set:()=>W,str:()=>at,sub:()=>vt,subtract:()=>ct,translate:()=>nt});var s={};r.r(s),r.d(s,{add:()=>zt,adjoint:()=>It,clone:()=>bt,copy:()=>yt,create:()=>gt,determinant:()=>Rt,equals:()=>Xt,exactEquals:()=>Zt,frob:()=>kt,fromMat2d:()=>jt,fromMat4:()=>mt,fromQuat:()=>qt,fromRotation:()=>Ct,fromScaling:()=>Ft,fromTranslation:()=>_t,fromValues:()=>xt,identity:()=>Pt,invert:()=>Bt,mul:()=>Ht,multiply:()=>Ot,multiplyScalar:()=>Yt,multiplyScalarAndAdd:()=>Nt,normalFromMat4:()=>Tt,projection:()=>Dt,rotate:()=>Lt,scale:()=>Et,set:()=>St,str:()=>Vt,sub:()=>Gt,subtract:()=>Ut,translate:()=>At,transpose:()=>wt});var a={};r.r(a),r.d(a,{add:()=>Fe,adjoint:()=>ne,clone:()=>Kt,copy:()=>Wt,create:()=>Qt,determinant:()=>ie,equals:()=>Ve,exactEquals:()=>De,frob:()=>Ce,fromQuat:()=>Be,fromQuat2:()=>be,fromRotation:()=>pe,fromRotationTranslation:()=>me,fromRotationTranslationScale:()=>Pe,fromRotationTranslationScaleOrigin:()=>we,fromScaling:()=>de,fromTranslation:()=>le,fromValues:()=>$t,fromXRotation:()=>Me,fromYRotation:()=>ve,fromZRotation:()=>ge,frustum:()=>Ie,getRotation:()=>Se,getScaling:()=>xe,getTranslation:()=>ye,identity:()=>te,invert:()=>re,lookAt:()=>Le,mul:()=>ke,multiply:()=>oe,multiplyScalar:()=>qe,multiplyScalarAndAdd:()=>Te,ortho:()=>Ae,perspective:()=>Re,perspectiveFromFieldOfView:()=>Oe,rotate:()=>ue,rotateX:()=>he,rotateY:()=>ce,rotateZ:()=>fe,scale:()=>ae,set:()=>Jt,str:()=>_e,sub:()=>ze,subtract:()=>je,targetTo:()=>Ee,translate:()=>se,transpose:()=>ee});var u={};r.r(u),r.d(u,{add:()=>Ge,angle:()=>Pr,bezier:()=>Mr,ceil:()=>$e,clone:()=>Ye,copy:()=>Xe,create:()=>Ue,cross:()=>lr,dist:()=>_r,distance:()=>or,div:()=>Er,divide:()=>We,dot:()=>fr,equals:()=>Rr,exactEquals:()=>Ir,floor:()=>Je,forEach:()=>qr,fromValues:()=>Ze,hermite:()=>pr,inverse:()=>hr,len:()=>Fr,length:()=>Ne,lerp:()=>dr,max:()=>er,min:()=>tr,mul:()=>Lr,multiply:()=>Ke,negate:()=>ur,normalize:()=>cr,random:()=>vr,rotateX:()=>yr,rotateY:()=>xr,rotateZ:()=>Sr,round:()=>rr,scale:()=>nr,scaleAndAdd:()=>ir,set:()=>He,sqrDist:()=>Cr,sqrLen:()=>jr,squaredDistance:()=>sr,squaredLength:()=>ar,str:()=>Br,sub:()=>Ar,subtract:()=>Qe,transformMat3:()=>mr,transformMat4:()=>gr,transformQuat:()=>br,zero:()=>wr});var h={};r.r(h),r.d(h,{add:()=>Ur,ceil:()=>Xr,clone:()=>Dr,copy:()=>kr,create:()=>Tr,cross:()=>un,dist:()=>yn,distance:()=>Jr,div:()=>bn,divide:()=>Zr,dot:()=>an,equals:()=>vn,exactEquals:()=>Mn,floor:()=>Hr,forEach:()=>wn,fromValues:()=>Vr,inverse:()=>on,len:()=>Sn,length:()=>en,lerp:()=>hn,max:()=>Qr,min:()=>Gr,mul:()=>mn,multiply:()=>Nr,negate:()=>nn,normalize:()=>sn,random:()=>cn,round:()=>Kr,scale:()=>Wr,scaleAndAdd:()=>$r,set:()=>zr,sqrDist:()=>xn,sqrLen:()=>Pn,squaredDistance:()=>tn,squaredLength:()=>rn,str:()=>pn,sub:()=>gn,subtract:()=>Yr,transformMat4:()=>fn,transformQuat:()=>ln,zero:()=>dn});var c={};r.r(c),r.d(c,{add:()=>ei,calculateW:()=>Fn,clone:()=>Wn,conjugate:()=>zn,copy:()=>Jn,create:()=>Bn,dot:()=>ii,equals:()=>li,exactEquals:()=>fi,exp:()=>jn,fromEuler:()=>Yn,fromMat3:()=>Un,fromValues:()=>$n,getAngle:()=>An,getAxisAngle:()=>On,identity:()=>In,invert:()=>kn,len:()=>ai,length:()=>si,lerp:()=>oi,ln:()=>qn,mul:()=>ri,multiply:()=>Ln,normalize:()=>ci,pow:()=>Tn,random:()=>Vn,rotateX:()=>En,rotateY:()=>_n,rotateZ:()=>Cn,rotationTo:()=>di,scale:()=>ni,set:()=>ti,setAxes:()=>Mi,setAxisAngle:()=>Rn,slerp:()=>Dn,sqlerp:()=>pi,sqrLen:()=>hi,squaredLength:()=>ui,str:()=>Nn});var f={};r.r(f),r.d(f,{add:()=>Vi,clone:()=>gi,conjugate:()=>Xi,copy:()=>wi,create:()=>vi,dot:()=>Yi,equals:()=>to,exactEquals:()=>Ji,fromMat4:()=>Pi,fromRotation:()=>Si,fromRotationTranslation:()=>yi,fromRotationTranslationValues:()=>bi,fromTranslation:()=>xi,fromValues:()=>mi,getDual:()=>Oi,getReal:()=>Ri,getTranslation:()=>Ei,identity:()=>Bi,invert:()=>Zi,len:()=>Gi,length:()=>Hi,lerp:()=>Ni,mul:()=>zi,multiply:()=>ki,normalize:()=>Wi,rotateAroundAxis:()=>Di,rotateByQuatAppend:()=>qi,rotateByQuatPrepend:()=>Ti,rotateX:()=>Ci,rotateY:()=>Fi,rotateZ:()=>ji,scale:()=>Ui,set:()=>Ii,setDual:()=>Li,setReal:()=>Ai,sqrLen:()=>Ki,squaredLength:()=>Qi,str:()=>$i,translate:()=>_i});var l={};r.r(l),r.d(l,{add:()=>so,angle:()=>Fo,ceil:()=>co,clone:()=>ro,copy:()=>io,create:()=>eo,cross:()=>Io,dist:()=>Yo,distance:()=>mo,div:()=>Uo,divide:()=>ho,dot:()=>Bo,equals:()=>Do,exactEquals:()=>To,floor:()=>fo,forEach:()=>Xo,fromValues:()=>no,inverse:()=>Po,len:()=>Vo,length:()=>yo,lerp:()=>Ro,max:()=>po,min:()=>lo,mul:()=>zo,multiply:()=>uo,negate:()=>So,normalize:()=>wo,random:()=>Oo,rotate:()=>Co,round:()=>Mo,scale:()=>vo,scaleAndAdd:()=>go,set:()=>oo,sqrDist:()=>No,sqrLen:()=>Zo,squaredDistance:()=>bo,squaredLength:()=>xo,str:()=>qo,sub:()=>ko,subtract:()=>ao,transformMat2:()=>Ao,transformMat2d:()=>Lo,transformMat3:()=>Eo,transformMat4:()=>_o,zero:()=>jo});var d=1e-6,p="undefined"!=typeof Float32Array?Float32Array:Array,M=Math.random;function v(t){p=t}var g=Math.PI/180;function m(t){return t*g}function b(t,e){return Math.abs(t-e)<=d*Math.max(1,Math.abs(t),Math.abs(e))}function y(){var t=new p(4);return p!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function x(t){var e=new p(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function S(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function P(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function w(t,e,r,n){var i=new p(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function B(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function I(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function R(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=r*o-i*n;return s?(s=1/s,t[0]=o*s,t[1]=-n*s,t[2]=-i*s,t[3]=r*s,t):null}function O(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function A(t){return t[0]*t[3]-t[2]*t[1]}function L(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=r[0],u=r[1],h=r[2],c=r[3];return t[0]=n*a+o*u,t[1]=i*a+s*u,t[2]=n*h+o*c,t[3]=i*h+s*c,t}function E(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(r),u=Math.cos(r);return t[0]=n*u+o*a,t[1]=i*u+s*a,t[2]=n*-a+o*u,t[3]=i*-a+s*u,t}function _(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=r[0],u=r[1];return t[0]=n*a,t[1]=i*a,t[2]=o*u,t[3]=s*u,t}function C(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function F(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function j(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function q(t){return Math.hypot(t[0],t[1],t[2],t[3])}function T(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function D(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function V(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function k(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function z(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],s=e[0],a=e[1],u=e[2],h=e[3];return Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-h)<=d*Math.max(1,Math.abs(o),Math.abs(h))}function U(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Y(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var N=L,Z=V;function X(){var t=new p(6);return p!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function H(t){var e=new p(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function G(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Q(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function K(t,e,r,n,i,o){var s=new p(6);return s[0]=t,s[1]=e,s[2]=r,s[3]=n,s[4]=i,s[5]=o,s}function W(t,e,r,n,i,o,s){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=s,t}function $(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=r*o-n*i;return u?(u=1/u,t[0]=o*u,t[1]=-n*u,t[2]=-i*u,t[3]=r*u,t[4]=(i*a-o*s)*u,t[5]=(n*s-r*a)*u,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],h=r[0],c=r[1],f=r[2],l=r[3],d=r[4],p=r[5];return t[0]=n*h+o*c,t[1]=i*h+s*c,t[2]=n*f+o*l,t[3]=i*f+s*l,t[4]=n*d+o*p+a,t[5]=i*d+s*p+u,t}function et(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],h=Math.sin(r),c=Math.cos(r);return t[0]=n*c+o*h,t[1]=i*c+s*h,t[2]=n*-h+o*c,t[3]=i*-h+s*c,t[4]=a,t[5]=u,t}function rt(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],h=r[0],c=r[1];return t[0]=n*h,t[1]=i*h,t[2]=o*c,t[3]=s*c,t[4]=a,t[5]=u,t}function nt(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],h=r[0],c=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=s,t[4]=n*h+o*c+a,t[5]=i*h+s*c+u,t}function it(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function st(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function at(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ht(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function ct(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function ft(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function lt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function dt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function pt(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=e[0],h=e[1],c=e[2],f=e[3],l=e[4],p=e[5];return Math.abs(r-u)<=d*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-h)<=d*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-c)<=d*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-f)<=d*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-l)<=d*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(a-p)<=d*Math.max(1,Math.abs(a),Math.abs(p))}var Mt=tt,vt=ct;function gt(){var t=new p(9);return p!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function mt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function bt(t){var e=new p(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function xt(t,e,r,n,i,o,s,a,u){var h=new p(9);return h[0]=t,h[1]=e,h[2]=r,h[3]=n,h[4]=i,h[5]=o,h[6]=s,h[7]=a,h[8]=u,h}function St(t,e,r,n,i,o,s,a,u,h){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=u,t[8]=h,t}function Pt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function wt(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Bt(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],h=e[7],c=e[8],f=c*s-a*h,l=-c*o+a*u,d=h*o-s*u,p=r*f+n*l+i*d;return p?(p=1/p,t[0]=f*p,t[1]=(-c*n+i*h)*p,t[2]=(a*n-i*s)*p,t[3]=l*p,t[4]=(c*r-i*u)*p,t[5]=(-a*r+i*o)*p,t[6]=d*p,t[7]=(-h*r+n*u)*p,t[8]=(s*r-n*o)*p,t):null}function It(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],h=e[7],c=e[8];return t[0]=s*c-a*h,t[1]=i*h-n*c,t[2]=n*a-i*s,t[3]=a*u-o*c,t[4]=r*c-i*u,t[5]=i*o-r*a,t[6]=o*h-s*u,t[7]=n*u-r*h,t[8]=r*s-n*o,t}function Rt(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],h=t[8];return e*(h*o-s*u)+r*(-h*i+s*a)+n*(u*i-o*a)}function Ot(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=r[0],d=r[1],p=r[2],M=r[3],v=r[4],g=r[5],m=r[6],b=r[7],y=r[8];return t[0]=l*n+d*s+p*h,t[1]=l*i+d*a+p*c,t[2]=l*o+d*u+p*f,t[3]=M*n+v*s+g*h,t[4]=M*i+v*a+g*c,t[5]=M*o+v*u+g*f,t[6]=m*n+b*s+y*h,t[7]=m*i+b*a+y*c,t[8]=m*o+b*u+y*f,t}function At(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=r[0],d=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=l*n+d*s+h,t[7]=l*i+d*a+c,t[8]=l*o+d*u+f,t}function Lt(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=Math.sin(r),d=Math.cos(r);return t[0]=d*n+l*s,t[1]=d*i+l*a,t[2]=d*o+l*u,t[3]=d*s-l*n,t[4]=d*a-l*i,t[5]=d*u-l*o,t[6]=h,t[7]=c,t[8]=f,t}function Et(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function _t(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Ct(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ft(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function jt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function qt(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=r+r,a=n+n,u=i+i,h=r*s,c=n*s,f=n*a,l=i*s,d=i*a,p=i*u,M=o*s,v=o*a,g=o*u;return t[0]=1-f-p,t[3]=c-g,t[6]=l+v,t[1]=c+g,t[4]=1-h-p,t[7]=d-M,t[2]=l-v,t[5]=d+M,t[8]=1-h-f,t}function Tt(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],h=e[7],c=e[8],f=e[9],l=e[10],d=e[11],p=e[12],M=e[13],v=e[14],g=e[15],m=r*a-n*s,b=r*u-i*s,y=r*h-o*s,x=n*u-i*a,S=n*h-o*a,P=i*h-o*u,w=c*M-f*p,B=c*v-l*p,I=c*g-d*p,R=f*v-l*M,O=f*g-d*M,A=l*g-d*v,L=m*A-b*O+y*R+x*I-S*B+P*w;return L?(L=1/L,t[0]=(a*A-u*O+h*R)*L,t[1]=(u*I-s*A-h*B)*L,t[2]=(s*O-a*I+h*w)*L,t[3]=(i*O-n*A-o*R)*L,t[4]=(r*A-i*I+o*B)*L,t[5]=(n*I-r*O-o*w)*L,t[6]=(M*P-v*S+g*x)*L,t[7]=(v*y-p*P-g*b)*L,t[8]=(p*S-M*y+g*m)*L,t):null}function Dt(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Vt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function kt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function zt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function Ut(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function Yt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function Nt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function Zt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Xt(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],h=t[7],c=t[8],f=e[0],l=e[1],p=e[2],M=e[3],v=e[4],g=e[5],m=e[6],b=e[7],y=e[8];return Math.abs(r-f)<=d*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-l)<=d*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-p)<=d*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-M)<=d*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(s-v)<=d*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(a-g)<=d*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-m)<=d*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(h-b)<=d*Math.max(1,Math.abs(h),Math.abs(b))&&Math.abs(c-y)<=d*Math.max(1,Math.abs(c),Math.abs(y))}var Ht=Ot,Gt=Ut;function Qt(){var t=new p(16);return p!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Kt(t){var e=new p(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Wt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $t(t,e,r,n,i,o,s,a,u,h,c,f,l,d,M,v){var g=new p(16);return g[0]=t,g[1]=e,g[2]=r,g[3]=n,g[4]=i,g[5]=o,g[6]=s,g[7]=a,g[8]=u,g[9]=h,g[10]=c,g[11]=f,g[12]=l,g[13]=d,g[14]=M,g[15]=v,g}function Jt(t,e,r,n,i,o,s,a,u,h,c,f,l,d,p,M,v){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=u,t[8]=h,t[9]=c,t[10]=f,t[11]=l,t[12]=d,t[13]=p,t[14]=M,t[15]=v,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function re(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],h=e[7],c=e[8],f=e[9],l=e[10],d=e[11],p=e[12],M=e[13],v=e[14],g=e[15],m=r*a-n*s,b=r*u-i*s,y=r*h-o*s,x=n*u-i*a,S=n*h-o*a,P=i*h-o*u,w=c*M-f*p,B=c*v-l*p,I=c*g-d*p,R=f*v-l*M,O=f*g-d*M,A=l*g-d*v,L=m*A-b*O+y*R+x*I-S*B+P*w;return L?(L=1/L,t[0]=(a*A-u*O+h*R)*L,t[1]=(i*O-n*A-o*R)*L,t[2]=(M*P-v*S+g*x)*L,t[3]=(l*S-f*P-d*x)*L,t[4]=(u*I-s*A-h*B)*L,t[5]=(r*A-i*I+o*B)*L,t[6]=(v*y-p*P-g*b)*L,t[7]=(c*P-l*y+d*b)*L,t[8]=(s*O-a*I+h*w)*L,t[9]=(n*I-r*O-o*w)*L,t[10]=(p*S-M*y+g*m)*L,t[11]=(f*y-c*S-d*m)*L,t[12]=(a*B-s*R-u*w)*L,t[13]=(r*R-n*B+i*w)*L,t[14]=(M*b-p*x-v*m)*L,t[15]=(c*x-f*b+l*m)*L,t):null}function ne(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],h=e[7],c=e[8],f=e[9],l=e[10],d=e[11],p=e[12],M=e[13],v=e[14],g=e[15];return t[0]=a*(l*g-d*v)-f*(u*g-h*v)+M*(u*d-h*l),t[1]=-(n*(l*g-d*v)-f*(i*g-o*v)+M*(i*d-o*l)),t[2]=n*(u*g-h*v)-a*(i*g-o*v)+M*(i*h-o*u),t[3]=-(n*(u*d-h*l)-a*(i*d-o*l)+f*(i*h-o*u)),t[4]=-(s*(l*g-d*v)-c*(u*g-h*v)+p*(u*d-h*l)),t[5]=r*(l*g-d*v)-c*(i*g-o*v)+p*(i*d-o*l),t[6]=-(r*(u*g-h*v)-s*(i*g-o*v)+p*(i*h-o*u)),t[7]=r*(u*d-h*l)-s*(i*d-o*l)+c*(i*h-o*u),t[8]=s*(f*g-d*M)-c*(a*g-h*M)+p*(a*d-h*f),t[9]=-(r*(f*g-d*M)-c*(n*g-o*M)+p*(n*d-o*f)),t[10]=r*(a*g-h*M)-s*(n*g-o*M)+p*(n*h-o*a),t[11]=-(r*(a*d-h*f)-s*(n*d-o*f)+c*(n*h-o*a)),t[12]=-(s*(f*v-l*M)-c*(a*v-u*M)+p*(a*l-u*f)),t[13]=r*(f*v-l*M)-c*(n*v-i*M)+p*(n*l-i*f),t[14]=-(r*(a*v-u*M)-s*(n*v-i*M)+p*(n*u-i*a)),t[15]=r*(a*l-u*f)-s*(n*l-i*f)+c*(n*u-i*a),t}function ie(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],h=t[8],c=t[9],f=t[10],l=t[11],d=t[12],p=t[13],M=t[14],v=t[15];return(e*s-r*o)*(f*v-l*M)-(e*a-n*o)*(c*v-l*p)+(e*u-i*o)*(c*M-f*p)+(r*a-n*s)*(h*v-l*d)-(r*u-i*s)*(h*M-f*d)+(n*u-i*a)*(h*p-c*d)}function oe(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=e[9],d=e[10],p=e[11],M=e[12],v=e[13],g=e[14],m=e[15],b=r[0],y=r[1],x=r[2],S=r[3];return t[0]=b*n+y*a+x*f+S*M,t[1]=b*i+y*u+x*l+S*v,t[2]=b*o+y*h+x*d+S*g,t[3]=b*s+y*c+x*p+S*m,b=r[4],y=r[5],x=r[6],S=r[7],t[4]=b*n+y*a+x*f+S*M,t[5]=b*i+y*u+x*l+S*v,t[6]=b*o+y*h+x*d+S*g,t[7]=b*s+y*c+x*p+S*m,b=r[8],y=r[9],x=r[10],S=r[11],t[8]=b*n+y*a+x*f+S*M,t[9]=b*i+y*u+x*l+S*v,t[10]=b*o+y*h+x*d+S*g,t[11]=b*s+y*c+x*p+S*m,b=r[12],y=r[13],x=r[14],S=r[15],t[12]=b*n+y*a+x*f+S*M,t[13]=b*i+y*u+x*l+S*v,t[14]=b*o+y*h+x*d+S*g,t[15]=b*s+y*c+x*p+S*m,t}function se(t,e,r){var n,i,o,s,a,u,h,c,f,l,d,p,M=r[0],v=r[1],g=r[2];return e===t?(t[12]=e[0]*M+e[4]*v+e[8]*g+e[12],t[13]=e[1]*M+e[5]*v+e[9]*g+e[13],t[14]=e[2]*M+e[6]*v+e[10]*g+e[14],t[15]=e[3]*M+e[7]*v+e[11]*g+e[15]):(n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=e[9],d=e[10],p=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=h,t[7]=c,t[8]=f,t[9]=l,t[10]=d,t[11]=p,t[12]=n*M+a*v+f*g+e[12],t[13]=i*M+u*v+l*g+e[13],t[14]=o*M+h*v+d*g+e[14],t[15]=s*M+c*v+p*g+e[15]),t}function ae(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(t,e,r,n){var i,o,s,a,u,h,c,f,l,p,M,v,g,m,b,y,x,S,P,w,B,I,R,O,A=n[0],L=n[1],E=n[2],_=Math.hypot(A,L,E);return _<d?null:(A*=_=1/_,L*=_,E*=_,i=Math.sin(r),s=1-(o=Math.cos(r)),a=e[0],u=e[1],h=e[2],c=e[3],f=e[4],l=e[5],p=e[6],M=e[7],v=e[8],g=e[9],m=e[10],b=e[11],y=A*A*s+o,x=L*A*s+E*i,S=E*A*s-L*i,P=A*L*s-E*i,w=L*L*s+o,B=E*L*s+A*i,I=A*E*s+L*i,R=L*E*s-A*i,O=E*E*s+o,t[0]=a*y+f*x+v*S,t[1]=u*y+l*x+g*S,t[2]=h*y+p*x+m*S,t[3]=c*y+M*x+b*S,t[4]=a*P+f*w+v*B,t[5]=u*P+l*w+g*B,t[6]=h*P+p*w+m*B,t[7]=c*P+M*w+b*B,t[8]=a*I+f*R+v*O,t[9]=u*I+l*R+g*O,t[10]=h*I+p*R+m*O,t[11]=c*I+M*R+b*O,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function he(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],s=e[5],a=e[6],u=e[7],h=e[8],c=e[9],f=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+h*n,t[5]=s*i+c*n,t[6]=a*i+f*n,t[7]=u*i+l*n,t[8]=h*i-o*n,t[9]=c*i-s*n,t[10]=f*i-a*n,t[11]=l*i-u*n,t}function ce(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],s=e[1],a=e[2],u=e[3],h=e[8],c=e[9],f=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-h*n,t[1]=s*i-c*n,t[2]=a*i-f*n,t[3]=u*i-l*n,t[8]=o*n+h*i,t[9]=s*n+c*i,t[10]=a*n+f*i,t[11]=u*n+l*i,t}function fe(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],s=e[1],a=e[2],u=e[3],h=e[4],c=e[5],f=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+h*n,t[1]=s*i+c*n,t[2]=a*i+f*n,t[3]=u*i+l*n,t[4]=h*i-o*n,t[5]=c*i-s*n,t[6]=f*i-a*n,t[7]=l*i-u*n,t}function le(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function de(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e,r){var n,i,o,s=r[0],a=r[1],u=r[2],h=Math.hypot(s,a,u);return h<d?null:(s*=h=1/h,a*=h,u*=h,n=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=s*s*o+i,t[1]=a*s*o+u*n,t[2]=u*s*o-a*n,t[3]=0,t[4]=s*a*o-u*n,t[5]=a*a*o+i,t[6]=u*a*o+s*n,t[7]=0,t[8]=s*u*o+a*n,t[9]=a*u*o-s*n,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Me(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ge(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=n+n,u=i+i,h=o+o,c=n*a,f=n*u,l=n*h,d=i*u,p=i*h,M=o*h,v=s*a,g=s*u,m=s*h;return t[0]=1-(d+M),t[1]=f+m,t[2]=l-g,t[3]=0,t[4]=f-m,t[5]=1-(c+M),t[6]=p+v,t[7]=0,t[8]=l+g,t[9]=p-v,t[10]=1-(c+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function be(t,e){var r=new p(3),n=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],u=e[5],h=e[6],c=e[7],f=n*n+i*i+o*o+s*s;return f>0?(r[0]=2*(a*s+c*n+u*o-h*i)/f,r[1]=2*(u*s+c*i+h*n-a*o)/f,r[2]=2*(h*s+c*o+a*i-u*n)/f):(r[0]=2*(a*s+c*n+u*o-h*i),r[1]=2*(u*s+c*i+h*n-a*o),r[2]=2*(h*s+c*o+a*i-u*n)),me(t,e,r),t}function ye(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function xe(t,e){var r=e[0],n=e[1],i=e[2],o=e[4],s=e[5],a=e[6],u=e[8],h=e[9],c=e[10];return t[0]=Math.hypot(r,n,i),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(u,h,c),t}function Se(t,e){var r=new p(3);xe(r,e);var n=1/r[0],i=1/r[1],o=1/r[2],s=e[0]*n,a=e[1]*i,u=e[2]*o,h=e[4]*n,c=e[5]*i,f=e[6]*o,l=e[8]*n,d=e[9]*i,M=e[10]*o,v=s+c+M,g=0;return v>0?(g=2*Math.sqrt(v+1),t[3]=.25*g,t[0]=(f-d)/g,t[1]=(l-u)/g,t[2]=(a-h)/g):s>c&&s>M?(g=2*Math.sqrt(1+s-c-M),t[3]=(f-d)/g,t[0]=.25*g,t[1]=(a+h)/g,t[2]=(l+u)/g):c>M?(g=2*Math.sqrt(1+c-s-M),t[3]=(l-u)/g,t[0]=(a+h)/g,t[1]=.25*g,t[2]=(f+d)/g):(g=2*Math.sqrt(1+M-s-c),t[3]=(a-h)/g,t[0]=(l+u)/g,t[1]=(f+d)/g,t[2]=.25*g),t}function Pe(t,e,r,n){var i=e[0],o=e[1],s=e[2],a=e[3],u=i+i,h=o+o,c=s+s,f=i*u,l=i*h,d=i*c,p=o*h,M=o*c,v=s*c,g=a*u,m=a*h,b=a*c,y=n[0],x=n[1],S=n[2];return t[0]=(1-(p+v))*y,t[1]=(l+b)*y,t[2]=(d-m)*y,t[3]=0,t[4]=(l-b)*x,t[5]=(1-(f+v))*x,t[6]=(M+g)*x,t[7]=0,t[8]=(d+m)*S,t[9]=(M-g)*S,t[10]=(1-(f+p))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function we(t,e,r,n,i){var o=e[0],s=e[1],a=e[2],u=e[3],h=o+o,c=s+s,f=a+a,l=o*h,d=o*c,p=o*f,M=s*c,v=s*f,g=a*f,m=u*h,b=u*c,y=u*f,x=n[0],S=n[1],P=n[2],w=i[0],B=i[1],I=i[2],R=(1-(M+g))*x,O=(d+y)*x,A=(p-b)*x,L=(d-y)*S,E=(1-(l+g))*S,_=(v+m)*S,C=(p+b)*P,F=(v-m)*P,j=(1-(l+M))*P;return t[0]=R,t[1]=O,t[2]=A,t[3]=0,t[4]=L,t[5]=E,t[6]=_,t[7]=0,t[8]=C,t[9]=F,t[10]=j,t[11]=0,t[12]=r[0]+w-(R*w+L*B+C*I),t[13]=r[1]+B-(O*w+E*B+F*I),t[14]=r[2]+I-(A*w+_*B+j*I),t[15]=1,t}function Be(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=r+r,a=n+n,u=i+i,h=r*s,c=n*s,f=n*a,l=i*s,d=i*a,p=i*u,M=o*s,v=o*a,g=o*u;return t[0]=1-f-p,t[1]=c+g,t[2]=l-v,t[3]=0,t[4]=c-g,t[5]=1-h-p,t[6]=d+M,t[7]=0,t[8]=l+v,t[9]=d-M,t[10]=1-h-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ie(t,e,r,n,i,o,s){var a=1/(r-e),u=1/(i-n),h=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(i+n)*u,t[10]=(s+o)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*h,t[15]=0,t}function Re(t,e,r,n,i){var o,s=1/Math.tan(e/2);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(n-i),t[10]=(i+n)*o,t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n),t}function Oe(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),u=2/(s+a),h=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(s-a)*u*.5,t[9]=(i-o)*h*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function Ae(t,e,r,n,i,o,s){var a=1/(e-r),u=1/(n-i),h=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+r)*a,t[13]=(i+n)*u,t[14]=(s+o)*h,t[15]=1,t}function Le(t,e,r,n){var i,o,s,a,u,h,c,f,l,p,M=e[0],v=e[1],g=e[2],m=n[0],b=n[1],y=n[2],x=r[0],S=r[1],P=r[2];return Math.abs(M-x)<d&&Math.abs(v-S)<d&&Math.abs(g-P)<d?te(t):(c=M-x,f=v-S,l=g-P,i=b*(l*=p=1/Math.hypot(c,f,l))-y*(f*=p),o=y*(c*=p)-m*l,s=m*f-b*c,(p=Math.hypot(i,o,s))?(i*=p=1/p,o*=p,s*=p):(i=0,o=0,s=0),a=f*s-l*o,u=l*i-c*s,h=c*o-f*i,(p=Math.hypot(a,u,h))?(a*=p=1/p,u*=p,h*=p):(a=0,u=0,h=0),t[0]=i,t[1]=a,t[2]=c,t[3]=0,t[4]=o,t[5]=u,t[6]=f,t[7]=0,t[8]=s,t[9]=h,t[10]=l,t[11]=0,t[12]=-(i*M+o*v+s*g),t[13]=-(a*M+u*v+h*g),t[14]=-(c*M+f*v+l*g),t[15]=1,t)}function Ee(t,e,r,n){var i=e[0],o=e[1],s=e[2],a=n[0],u=n[1],h=n[2],c=i-r[0],f=o-r[1],l=s-r[2],d=c*c+f*f+l*l;d>0&&(c*=d=1/Math.sqrt(d),f*=d,l*=d);var p=u*l-h*f,M=h*c-a*l,v=a*f-u*c;return(d=p*p+M*M+v*v)>0&&(p*=d=1/Math.sqrt(d),M*=d,v*=d),t[0]=p,t[1]=M,t[2]=v,t[3]=0,t[4]=f*v-l*M,t[5]=l*p-c*v,t[6]=c*M-f*p,t[7]=0,t[8]=c,t[9]=f,t[10]=l,t[11]=0,t[12]=i,t[13]=o,t[14]=s,t[15]=1,t}function _e(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Ce(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Fe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function je(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function qe(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function Te(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function De(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Ve(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],h=t[7],c=t[8],f=t[9],l=t[10],p=t[11],M=t[12],v=t[13],g=t[14],m=t[15],b=e[0],y=e[1],x=e[2],S=e[3],P=e[4],w=e[5],B=e[6],I=e[7],R=e[8],O=e[9],A=e[10],L=e[11],E=e[12],_=e[13],C=e[14],F=e[15];return Math.abs(r-b)<=d*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-y)<=d*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(i-x)<=d*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(o-S)<=d*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(s-P)<=d*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(a-w)<=d*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(u-B)<=d*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(h-I)<=d*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(c-R)<=d*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(f-O)<=d*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(l-A)<=d*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(p-L)<=d*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(M-E)<=d*Math.max(1,Math.abs(M),Math.abs(E))&&Math.abs(v-_)<=d*Math.max(1,Math.abs(v),Math.abs(_))&&Math.abs(g-C)<=d*Math.max(1,Math.abs(g),Math.abs(C))&&Math.abs(m-F)<=d*Math.max(1,Math.abs(m),Math.abs(F))}var ke=oe,ze=je;function Ue(){var t=new p(3);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ye(t){var e=new p(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ne(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function Ze(t,e,r){var n=new p(3);return n[0]=t,n[1]=e,n[2]=r,n}function Xe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function He(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function Ge(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Qe(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function Ke(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function We(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function $e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Je(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function er(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function rr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function nr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function ir(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function or(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.hypot(r,n,i)}function sr(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function ar(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function ur(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function hr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function cr(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function fr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function lr(t,e,r){var n=e[0],i=e[1],o=e[2],s=r[0],a=r[1],u=r[2];return t[0]=i*u-o*a,t[1]=o*s-n*u,t[2]=n*a-i*s,t}function dr(t,e,r,n){var i=e[0],o=e[1],s=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=s+n*(r[2]-s),t}function pr(t,e,r,n,i,o){var s=o*o,a=s*(2*o-3)+1,u=s*(o-2)+o,h=s*(o-1),c=s*(3-2*o);return t[0]=e[0]*a+r[0]*u+n[0]*h+i[0]*c,t[1]=e[1]*a+r[1]*u+n[1]*h+i[1]*c,t[2]=e[2]*a+r[2]*u+n[2]*h+i[2]*c,t}function Mr(t,e,r,n,i,o){var s=1-o,a=s*s,u=o*o,h=a*s,c=3*o*a,f=3*u*s,l=u*o;return t[0]=e[0]*h+r[0]*c+n[0]*f+i[0]*l,t[1]=e[1]*h+r[1]*c+n[1]*f+i[1]*l,t[2]=e[2]*h+r[2]*c+n[2]*f+i[2]*l,t}function vr(t,e){e=e||1;var r=2*M()*Math.PI,n=2*M()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}function gr(t,e,r){var n=e[0],i=e[1],o=e[2],s=r[3]*n+r[7]*i+r[11]*o+r[15];return s=s||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/s,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/s,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/s,t}function mr(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t}function br(t,e,r){var n=r[0],i=r[1],o=r[2],s=r[3],a=e[0],u=e[1],h=e[2],c=i*h-o*u,f=o*a-n*h,l=n*u-i*a,d=i*l-o*f,p=o*c-n*l,M=n*f-i*c,v=2*s;return c*=v,f*=v,l*=v,d*=2,p*=2,M*=2,t[0]=a+c+d,t[1]=u+f+p,t[2]=h+l+M,t}function yr(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function xr(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function Sr(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function Pr(t,e){var r=t[0],n=t[1],i=t[2],o=e[0],s=e[1],a=e[2],u=Math.sqrt(r*r+n*n+i*i)*Math.sqrt(o*o+s*s+a*a),h=u&&fr(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}function wr(t){return t[0]=0,t[1]=0,t[2]=0,t}function Br(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ir(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Rr(t,e){var r=t[0],n=t[1],i=t[2],o=e[0],s=e[1],a=e[2];return Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=d*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-a)<=d*Math.max(1,Math.abs(i),Math.abs(a))}var Or,Ar=Qe,Lr=Ke,Er=We,_r=or,Cr=sr,Fr=Ne,jr=ar,qr=(Or=Ue(),function(t,e,r,n,i,o){var s,a;for(e||(e=3),r||(r=0),a=n?Math.min(n*e+r,t.length):t.length,s=r;s<a;s+=e)Or[0]=t[s],Or[1]=t[s+1],Or[2]=t[s+2],i(Or,Or,o),t[s]=Or[0],t[s+1]=Or[1],t[s+2]=Or[2];return t});function Tr(){var t=new p(4);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Dr(t){var e=new p(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Vr(t,e,r,n){var i=new p(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function kr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function zr(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function Ur(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function Yr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Nr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function Zr(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function Xr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Hr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Gr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function Qr(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function Kr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Wr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function $r(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function Jr(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(r,n,i,o)}function tn(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o}function en(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.hypot(e,r,n,i)}function rn(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function nn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function on(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function sn(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=r*r+n*n+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=r*s,t[1]=n*s,t[2]=i*s,t[3]=o*s,t}function an(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function un(t,e,r,n){var i=r[0]*n[1]-r[1]*n[0],o=r[0]*n[2]-r[2]*n[0],s=r[0]*n[3]-r[3]*n[0],a=r[1]*n[2]-r[2]*n[1],u=r[1]*n[3]-r[3]*n[1],h=r[2]*n[3]-r[3]*n[2],c=e[0],f=e[1],l=e[2],d=e[3];return t[0]=f*h-l*u+d*a,t[1]=-c*h+l*s-d*o,t[2]=c*u-f*s+d*i,t[3]=-c*a+f*o-l*i,t}function hn(t,e,r,n){var i=e[0],o=e[1],s=e[2],a=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=s+n*(r[2]-s),t[3]=a+n*(r[3]-a),t}function cn(t,e){var r,n,i,o,s,a;e=e||1;do{s=(r=2*M()-1)*r+(n=2*M()-1)*n}while(s>=1);do{a=(i=2*M()-1)*i+(o=2*M()-1)*o}while(a>=1);var u=Math.sqrt((1-s)/a);return t[0]=e*r,t[1]=e*n,t[2]=e*i*u,t[3]=e*o*u,t}function fn(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*s,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*s,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*s,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*s,t}function ln(t,e,r){var n=e[0],i=e[1],o=e[2],s=r[0],a=r[1],u=r[2],h=r[3],c=h*n+a*o-u*i,f=h*i+u*n-s*o,l=h*o+s*i-a*n,d=-s*n-a*i-u*o;return t[0]=c*h+d*-s+f*-u-l*-a,t[1]=f*h+d*-a+l*-s-c*-u,t[2]=l*h+d*-u+c*-a-f*-s,t[3]=e[3],t}function dn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function pn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Mn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function vn(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],s=e[0],a=e[1],u=e[2],h=e[3];return Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-h)<=d*Math.max(1,Math.abs(o),Math.abs(h))}var gn=Yr,mn=Nr,bn=Zr,yn=Jr,xn=tn,Sn=en,Pn=rn,wn=function(){var t=Tr();return function(e,r,n,i,o,s){var a,u;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,a=n;a<u;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}();function Bn(){var t=new p(4);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function In(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Rn(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function On(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>d?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function An(t,e){var r=ii(t,e);return Math.acos(2*r*r-1)}function Ln(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=r[0],u=r[1],h=r[2],c=r[3];return t[0]=n*c+s*a+i*h-o*u,t[1]=i*c+s*u+o*a-n*h,t[2]=o*c+s*h+n*u-i*a,t[3]=s*c-n*a-i*u-o*h,t}function En(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(r),u=Math.cos(r);return t[0]=n*u+s*a,t[1]=i*u+o*a,t[2]=o*u-i*a,t[3]=s*u-n*a,t}function _n(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(r),u=Math.cos(r);return t[0]=n*u-o*a,t[1]=i*u+s*a,t[2]=o*u+n*a,t[3]=s*u-i*a,t}function Cn(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*a,t[1]=i*u-n*a,t[2]=o*u+s*a,t[3]=s*u-o*a,t}function Fn(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function jn(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=Math.sqrt(r*r+n*n+i*i),a=Math.exp(o),u=s>0?a*Math.sin(s)/s:0;return t[0]=r*u,t[1]=n*u,t[2]=i*u,t[3]=a*Math.cos(s),t}function qn(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=Math.sqrt(r*r+n*n+i*i),a=s>0?Math.atan2(s,o)/s:0;return t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=.5*Math.log(r*r+n*n+i*i+o*o),t}function Tn(t,e,r){return qn(t,e),ni(t,t,r),jn(t,t),t}function Dn(t,e,r,n){var i,o,s,a,u,h=e[0],c=e[1],f=e[2],l=e[3],p=r[0],M=r[1],v=r[2],g=r[3];return(o=h*p+c*M+f*v+l*g)<0&&(o=-o,p=-p,M=-M,v=-v,g=-g),1-o>d?(i=Math.acos(o),s=Math.sin(i),a=Math.sin((1-n)*i)/s,u=Math.sin(n*i)/s):(a=1-n,u=n),t[0]=a*h+u*p,t[1]=a*c+u*M,t[2]=a*f+u*v,t[3]=a*l+u*g,t}function Vn(t){var e=M(),r=M(),n=M(),i=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*r),t[1]=i*Math.cos(2*Math.PI*r),t[2]=o*Math.sin(2*Math.PI*n),t[3]=o*Math.cos(2*Math.PI*n),t}function kn(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=r*r+n*n+i*i+o*o,a=s?1/s:0;return t[0]=-r*a,t[1]=-n*a,t[2]=-i*a,t[3]=o*a,t}function zn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Un(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,s=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*s+s]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*o+s]-e[3*s+o])*r,t[o]=(e[3*o+i]+e[3*i+o])*r,t[s]=(e[3*s+i]+e[3*i+s])*r}return t}function Yn(t,e,r,n){var i=.5*Math.PI/180;e*=i,r*=i,n*=i;var o=Math.sin(e),s=Math.cos(e),a=Math.sin(r),u=Math.cos(r),h=Math.sin(n),c=Math.cos(n);return t[0]=o*u*c-s*a*h,t[1]=s*a*c+o*u*h,t[2]=s*u*h-o*a*c,t[3]=s*u*c+o*a*h,t}function Nn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Zn,Xn,Hn,Gn,Qn,Kn,Wn=Dr,$n=Vr,Jn=kr,ti=zr,ei=Ur,ri=Ln,ni=Wr,ii=an,oi=hn,si=en,ai=si,ui=rn,hi=ui,ci=sn,fi=Mn,li=vn,di=(Zn=Ue(),Xn=Ze(1,0,0),Hn=Ze(0,1,0),function(t,e,r){var n=fr(e,r);return n<-.999999?(lr(Zn,Xn,e),Fr(Zn)<1e-6&&lr(Zn,Hn,e),cr(Zn,Zn),Rn(t,Zn,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(lr(Zn,e,r),t[0]=Zn[0],t[1]=Zn[1],t[2]=Zn[2],t[3]=1+n,ci(t,t))}),pi=(Gn=Bn(),Qn=Bn(),function(t,e,r,n,i,o){return Dn(Gn,e,i,o),Dn(Qn,r,n,o),Dn(t,Gn,Qn,2*o*(1-o)),t}),Mi=(Kn=gt(),function(t,e,r,n){return Kn[0]=r[0],Kn[3]=r[1],Kn[6]=r[2],Kn[1]=n[0],Kn[4]=n[1],Kn[7]=n[2],Kn[2]=-e[0],Kn[5]=-e[1],Kn[8]=-e[2],ci(t,Un(t,Kn))});function vi(){var t=new p(8);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function gi(t){var e=new p(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function mi(t,e,r,n,i,o,s,a){var u=new p(8);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=i,u[5]=o,u[6]=s,u[7]=a,u}function bi(t,e,r,n,i,o,s){var a=new p(8);a[0]=t,a[1]=e,a[2]=r,a[3]=n;var u=.5*i,h=.5*o,c=.5*s;return a[4]=u*n+h*r-c*e,a[5]=h*n+c*t-u*r,a[6]=c*n+u*e-h*t,a[7]=-u*t-h*e-c*r,a}function yi(t,e,r){var n=.5*r[0],i=.5*r[1],o=.5*r[2],s=e[0],a=e[1],u=e[2],h=e[3];return t[0]=s,t[1]=a,t[2]=u,t[3]=h,t[4]=n*h+i*u-o*a,t[5]=i*h+o*s-n*u,t[6]=o*h+n*a-i*s,t[7]=-n*s-i*a-o*u,t}function xi(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Si(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Pi(t,e){var r=Bn();Se(r,e);var n=new p(3);return ye(n,e),yi(t,r,n),t}function wi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Bi(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ii(t,e,r,n,i,o,s,a,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=u,t}var Ri=Jn;function Oi(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Ai=Jn;function Li(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Ei(t,e){var r=e[4],n=e[5],i=e[6],o=e[7],s=-e[0],a=-e[1],u=-e[2],h=e[3];return t[0]=2*(r*h+o*s+n*u-i*a),t[1]=2*(n*h+o*a+i*s-r*u),t[2]=2*(i*h+o*u+r*a-n*s),t}function _i(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=.5*r[0],u=.5*r[1],h=.5*r[2],c=e[4],f=e[5],l=e[6],d=e[7];return t[0]=n,t[1]=i,t[2]=o,t[3]=s,t[4]=s*a+i*h-o*u+c,t[5]=s*u+o*a-n*h+f,t[6]=s*h+n*u-i*a+l,t[7]=-n*a-i*u-o*h+d,t}function Ci(t,e,r){var n=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],u=e[5],h=e[6],c=e[7],f=a*s+c*n+u*o-h*i,l=u*s+c*i+h*n-a*o,d=h*s+c*o+a*i-u*n,p=c*s-a*n-u*i-h*o;return En(t,e,r),n=t[0],i=t[1],o=t[2],s=t[3],t[4]=f*s+p*n+l*o-d*i,t[5]=l*s+p*i+d*n-f*o,t[6]=d*s+p*o+f*i-l*n,t[7]=p*s-f*n-l*i-d*o,t}function Fi(t,e,r){var n=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],u=e[5],h=e[6],c=e[7],f=a*s+c*n+u*o-h*i,l=u*s+c*i+h*n-a*o,d=h*s+c*o+a*i-u*n,p=c*s-a*n-u*i-h*o;return _n(t,e,r),n=t[0],i=t[1],o=t[2],s=t[3],t[4]=f*s+p*n+l*o-d*i,t[5]=l*s+p*i+d*n-f*o,t[6]=d*s+p*o+f*i-l*n,t[7]=p*s-f*n-l*i-d*o,t}function ji(t,e,r){var n=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],u=e[5],h=e[6],c=e[7],f=a*s+c*n+u*o-h*i,l=u*s+c*i+h*n-a*o,d=h*s+c*o+a*i-u*n,p=c*s-a*n-u*i-h*o;return Cn(t,e,r),n=t[0],i=t[1],o=t[2],s=t[3],t[4]=f*s+p*n+l*o-d*i,t[5]=l*s+p*i+d*n-f*o,t[6]=d*s+p*o+f*i-l*n,t[7]=p*s-f*n-l*i-d*o,t}function qi(t,e,r){var n=r[0],i=r[1],o=r[2],s=r[3],a=e[0],u=e[1],h=e[2],c=e[3];return t[0]=a*s+c*n+u*o-h*i,t[1]=u*s+c*i+h*n-a*o,t[2]=h*s+c*o+a*i-u*n,t[3]=c*s-a*n-u*i-h*o,a=e[4],u=e[5],h=e[6],c=e[7],t[4]=a*s+c*n+u*o-h*i,t[5]=u*s+c*i+h*n-a*o,t[6]=h*s+c*o+a*i-u*n,t[7]=c*s-a*n-u*i-h*o,t}function Ti(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=r[0],u=r[1],h=r[2],c=r[3];return t[0]=n*c+s*a+i*h-o*u,t[1]=i*c+s*u+o*a-n*h,t[2]=o*c+s*h+n*u-i*a,t[3]=s*c-n*a-i*u-o*h,a=r[4],u=r[5],h=r[6],c=r[7],t[4]=n*c+s*a+i*h-o*u,t[5]=i*c+s*u+o*a-n*h,t[6]=o*c+s*h+n*u-i*a,t[7]=s*c-n*a-i*u-o*h,t}function Di(t,e,r,n){if(Math.abs(n)<d)return wi(t,e);var i=Math.hypot(r[0],r[1],r[2]);n*=.5;var o=Math.sin(n),s=o*r[0]/i,a=o*r[1]/i,u=o*r[2]/i,h=Math.cos(n),c=e[0],f=e[1],l=e[2],p=e[3];t[0]=c*h+p*s+f*u-l*a,t[1]=f*h+p*a+l*s-c*u,t[2]=l*h+p*u+c*a-f*s,t[3]=p*h-c*s-f*a-l*u;var M=e[4],v=e[5],g=e[6],m=e[7];return t[4]=M*h+m*s+v*u-g*a,t[5]=v*h+m*a+g*s-M*u,t[6]=g*h+m*u+M*a-v*s,t[7]=m*h-M*s-v*a-g*u,t}function Vi(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function ki(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=r[4],u=r[5],h=r[6],c=r[7],f=e[4],l=e[5],d=e[6],p=e[7],M=r[0],v=r[1],g=r[2],m=r[3];return t[0]=n*m+s*M+i*g-o*v,t[1]=i*m+s*v+o*M-n*g,t[2]=o*m+s*g+n*v-i*M,t[3]=s*m-n*M-i*v-o*g,t[4]=n*c+s*a+i*h-o*u+f*m+p*M+l*g-d*v,t[5]=i*c+s*u+o*a-n*h+l*m+p*v+d*M-f*g,t[6]=o*c+s*h+n*u-i*a+d*m+p*g+f*v-l*M,t[7]=s*c-n*a-i*u-o*h+p*m-f*M-l*v-d*g,t}var zi=ki;function Ui(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}var Yi=ii;function Ni(t,e,r,n){var i=1-n;return Yi(e,r)<0&&(n=-n),t[0]=e[0]*i+r[0]*n,t[1]=e[1]*i+r[1]*n,t[2]=e[2]*i+r[2]*n,t[3]=e[3]*i+r[3]*n,t[4]=e[4]*i+r[4]*n,t[5]=e[5]*i+r[5]*n,t[6]=e[6]*i+r[6]*n,t[7]=e[7]*i+r[7]*n,t}function Zi(t,e){var r=Qi(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function Xi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Hi=si,Gi=Hi,Qi=ui,Ki=Qi;function Wi(t,e){var r=Qi(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,i=e[1]/r,o=e[2]/r,s=e[3]/r,a=e[4],u=e[5],h=e[6],c=e[7],f=n*a+i*u+o*h+s*c;t[0]=n,t[1]=i,t[2]=o,t[3]=s,t[4]=(a-n*f)/r,t[5]=(u-i*f)/r,t[6]=(h-o*f)/r,t[7]=(c-s*f)/r}return t}function $i(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Ji(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function to(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],h=t[7],c=e[0],f=e[1],l=e[2],p=e[3],M=e[4],v=e[5],g=e[6],m=e[7];return Math.abs(r-c)<=d*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-f)<=d*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-l)<=d*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-p)<=d*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-M)<=d*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(a-v)<=d*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-g)<=d*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(h-m)<=d*Math.max(1,Math.abs(h),Math.abs(m))}function eo(){var t=new p(2);return p!=Float32Array&&(t[0]=0,t[1]=0),t}function ro(t){var e=new p(2);return e[0]=t[0],e[1]=t[1],e}function no(t,e){var r=new p(2);return r[0]=t,r[1]=e,r}function io(t,e){return t[0]=e[0],t[1]=e[1],t}function oo(t,e,r){return t[0]=e,t[1]=r,t}function so(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function ao(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function uo(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function ho(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function co(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function fo(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function lo(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function po(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function Mo(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function vo(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function go(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function mo(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.hypot(r,n)}function bo(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function yo(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function xo(t){var e=t[0],r=t[1];return e*e+r*r}function So(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Po(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function wo(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function Bo(t,e){return t[0]*e[0]+t[1]*e[1]}function Io(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function Ro(t,e,r,n){var i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t}function Oo(t,e){e=e||1;var r=2*M()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function Ao(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function Lo(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function Eo(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function _o(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function Co(t,e,r,n){var i=e[0]-r[0],o=e[1]-r[1],s=Math.sin(n),a=Math.cos(n);return t[0]=i*a-o*s+r[0],t[1]=i*s+o*a+r[1],t}function Fo(t,e){var r=t[0],n=t[1],i=e[0],o=e[1],s=Math.sqrt(r*r+n*n)*Math.sqrt(i*i+o*o),a=s&&(r*i+n*o)/s;return Math.acos(Math.min(Math.max(a,-1),1))}function jo(t){return t[0]=0,t[1]=0,t}function qo(t){return"vec2("+t[0]+", "+t[1]+")"}function To(t,e){return t[0]===e[0]&&t[1]===e[1]}function Do(t,e){var r=t[0],n=t[1],i=e[0],o=e[1];return Math.abs(r-i)<=d*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))}var Vo=yo,ko=ao,zo=uo,Uo=ho,Yo=mo,No=bo,Zo=xo,Xo=function(){var t=eo();return function(e,r,n,i,o,s){var a,u;for(r||(r=2),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,a=n;a<u;a+=r)t[0]=e[a],t[1]=e[a+1],o(t,t,s),e[a]=t[0],e[a+1]=t[1];return e}}()},21:(t,e,r)=>{var n;!function(){"use strict";var i=.5*(Math.sqrt(3)-1),o=(3-Math.sqrt(3))/6,s=1/6,a=(Math.sqrt(5)-1)/4,u=(5-Math.sqrt(5))/20;function h(t){var e;e="function"==typeof t?t:t?function(){var t=0,e=0,r=0,n=1,i=f();t=i(" "),e=i(" "),r=i(" ");for(var o=0;o<arguments.length;o++)(t-=i(arguments[o]))<0&&(t+=1),(e-=i(arguments[o]))<0&&(e+=1),(r-=i(arguments[o]))<0&&(r+=1);return i=null,function(){var i=2091639*t+2.3283064365386963e-10*n;return t=e,e=r,r=i-(n=0|i)}}(t):Math.random,this.p=c(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var r=0;r<512;r++)this.perm[r]=this.p[255&r],this.permMod12[r]=this.perm[r]%12}function c(t){var e,r=new Uint8Array(256);for(e=0;e<256;e++)r[e]=e;for(e=0;e<255;e++){var n=e+~~(t()*(256-e)),i=r[e];r[e]=r[n],r[n]=i}return r}function f(){var t=4022871197;return function(e){e=e.toString();for(var r=0;r<e.length;r++){var n=.02519603282416938*(t+=e.charCodeAt(r));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)}}h.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var r,n,s=this.permMod12,a=this.perm,u=this.grad3,h=0,c=0,f=0,l=(t+e)*i,d=Math.floor(t+l),p=Math.floor(e+l),M=(d+p)*o,v=t-(d-M),g=e-(p-M);v>g?(r=1,n=0):(r=0,n=1);var m=v-r+o,b=g-n+o,y=v-1+2*o,x=g-1+2*o,S=255&d,P=255&p,w=.5-v*v-g*g;if(w>=0){var B=3*s[S+a[P]];h=(w*=w)*w*(u[B]*v+u[B+1]*g)}var I=.5-m*m-b*b;if(I>=0){var R=3*s[S+r+a[P+n]];c=(I*=I)*I*(u[R]*m+u[R+1]*b)}var O=.5-y*y-x*x;if(O>=0){var A=3*s[S+1+a[P+1]];f=(O*=O)*O*(u[A]*y+u[A+1]*x)}return 70*(h+c+f)},noise3D:function(t,e,r){var n,i,o,a,u,h,c,f,l,d,p=this.permMod12,M=this.perm,v=this.grad3,g=.3333333333333333*(t+e+r),m=Math.floor(t+g),b=Math.floor(e+g),y=Math.floor(r+g),x=(m+b+y)*s,S=t-(m-x),P=e-(b-x),w=r-(y-x);S>=P?P>=w?(u=1,h=0,c=0,f=1,l=1,d=0):S>=w?(u=1,h=0,c=0,f=1,l=0,d=1):(u=0,h=0,c=1,f=1,l=0,d=1):P<w?(u=0,h=0,c=1,f=0,l=1,d=1):S<w?(u=0,h=1,c=0,f=0,l=1,d=1):(u=0,h=1,c=0,f=1,l=1,d=0);var B=S-u+s,I=P-h+s,R=w-c+s,O=S-f+2*s,A=P-l+2*s,L=w-d+2*s,E=S-1+.5,_=P-1+.5,C=w-1+.5,F=255&m,j=255&b,q=255&y,T=.6-S*S-P*P-w*w;if(T<0)n=0;else{var D=3*p[F+M[j+M[q]]];n=(T*=T)*T*(v[D]*S+v[D+1]*P+v[D+2]*w)}var V=.6-B*B-I*I-R*R;if(V<0)i=0;else{var k=3*p[F+u+M[j+h+M[q+c]]];i=(V*=V)*V*(v[k]*B+v[k+1]*I+v[k+2]*R)}var z=.6-O*O-A*A-L*L;if(z<0)o=0;else{var U=3*p[F+f+M[j+l+M[q+d]]];o=(z*=z)*z*(v[U]*O+v[U+1]*A+v[U+2]*L)}var Y=.6-E*E-_*_-C*C;if(Y<0)a=0;else{var N=3*p[F+1+M[j+1+M[q+1]]];a=(Y*=Y)*Y*(v[N]*E+v[N+1]*_+v[N+2]*C)}return 32*(n+i+o+a)},noise4D:function(t,e,r,n){var i,o,s,h,c,f,l,d,p,M,v,g,m,b,y,x,S,P=this.perm,w=this.grad4,B=(t+e+r+n)*a,I=Math.floor(t+B),R=Math.floor(e+B),O=Math.floor(r+B),A=Math.floor(n+B),L=(I+R+O+A)*u,E=t-(I-L),_=e-(R-L),C=r-(O-L),F=n-(A-L),j=0,q=0,T=0,D=0;E>_?j++:q++,E>C?j++:T++,E>F?j++:D++,_>C?q++:T++,_>F?q++:D++,C>F?T++:D++;var V=E-(f=j>=3?1:0)+u,k=_-(l=q>=3?1:0)+u,z=C-(d=T>=3?1:0)+u,U=F-(p=D>=3?1:0)+u,Y=E-(M=j>=2?1:0)+2*u,N=_-(v=q>=2?1:0)+2*u,Z=C-(g=T>=2?1:0)+2*u,X=F-(m=D>=2?1:0)+2*u,H=E-(b=j>=1?1:0)+3*u,G=_-(y=q>=1?1:0)+3*u,Q=C-(x=T>=1?1:0)+3*u,K=F-(S=D>=1?1:0)+3*u,W=E-1+4*u,$=_-1+4*u,J=C-1+4*u,tt=F-1+4*u,et=255&I,rt=255&R,nt=255&O,it=255&A,ot=.6-E*E-_*_-C*C-F*F;if(ot<0)i=0;else{var st=P[et+P[rt+P[nt+P[it]]]]%32*4;i=(ot*=ot)*ot*(w[st]*E+w[st+1]*_+w[st+2]*C+w[st+3]*F)}var at=.6-V*V-k*k-z*z-U*U;if(at<0)o=0;else{var ut=P[et+f+P[rt+l+P[nt+d+P[it+p]]]]%32*4;o=(at*=at)*at*(w[ut]*V+w[ut+1]*k+w[ut+2]*z+w[ut+3]*U)}var ht=.6-Y*Y-N*N-Z*Z-X*X;if(ht<0)s=0;else{var ct=P[et+M+P[rt+v+P[nt+g+P[it+m]]]]%32*4;s=(ht*=ht)*ht*(w[ct]*Y+w[ct+1]*N+w[ct+2]*Z+w[ct+3]*X)}var ft=.6-H*H-G*G-Q*Q-K*K;if(ft<0)h=0;else{var lt=P[et+b+P[rt+y+P[nt+x+P[it+S]]]]%32*4;h=(ft*=ft)*ft*(w[lt]*H+w[lt+1]*G+w[lt+2]*Q+w[lt+3]*K)}var dt=.6-W*W-$*$-J*J-tt*tt;if(dt<0)c=0;else{var pt=P[et+1+P[rt+1+P[nt+1+P[it+1]]]]%32*4;c=(dt*=dt)*dt*(w[pt]*W+w[pt+1]*$+w[pt+2]*J+w[pt+3]*tt)}return 27*(i+o+s+h+c)}},h._buildPermutationTable=c,void 0===(n=function(){return h}.call(e,r,e,t))||(t.exports=n),e.SimplexNoise=h,t.exports=h}()}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}return r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(915)})()}));