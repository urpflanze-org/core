/*! For license information please see urpflanze.min.js.LICENSE.txt */
var t={21:(t,e,i)=>{var s;!function(){var r=.5*(Math.sqrt(3)-1),n=(3-Math.sqrt(3))/6,o=1/6,h=(Math.sqrt(5)-1)/4,a=(5-Math.sqrt(5))/20;function c(t){var e;e="function"==typeof t?t:t?function(){var t=0,e=0,i=0,s=1,r=f();t=r(" "),e=r(" "),i=r(" ");for(var n=0;n<arguments.length;n++)(t-=r(arguments[n]))<0&&(t+=1),(e-=r(arguments[n]))<0&&(e+=1),(i-=r(arguments[n]))<0&&(i+=1);return r=null,function(){var r=2091639*t+2.3283064365386963e-10*s;return t=e,e=i,i=r-(s=0|r)}}(t):Math.random,this.p=p(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var i=0;i<512;i++)this.perm[i]=this.p[255&i],this.permMod12[i]=this.perm[i]%12}function p(t){var e,i=new Uint8Array(256);for(e=0;e<256;e++)i[e]=e;for(e=0;e<255;e++){var s=e+~~(t()*(256-e)),r=i[e];i[e]=i[s],i[s]=r}return i}function f(){var t=4022871197;return function(e){e=e.toString();for(var i=0;i<e.length;i++){var s=.02519603282416938*(t+=e.charCodeAt(i));s-=t=s>>>0,t=(s*=t)>>>0,t+=4294967296*(s-=t)}return 2.3283064365386963e-10*(t>>>0)}}c.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var i,s,o=this.permMod12,h=this.perm,a=this.grad3,c=0,p=0,f=0,u=(t+e)*r,d=Math.floor(t+u),l=Math.floor(e+u),g=(d+l)*n,y=t-(d-g),x=e-(l-g);y>x?(i=1,s=0):(i=0,s=1);var v=y-i+n,S=x-s+n,w=y-1+2*n,m=x-1+2*n,M=255&d,B=255&l,b=.5-y*y-x*x;if(b>=0){var P=3*o[M+h[B]];c=(b*=b)*b*(a[P]*y+a[P+1]*x)}var I=.5-v*v-S*S;if(I>=0){var L=3*o[M+i+h[B+s]];p=(I*=I)*I*(a[L]*v+a[L+1]*S)}var R=.5-w*w-m*m;if(R>=0){var A=3*o[M+1+h[B+1]];f=(R*=R)*R*(a[A]*w+a[A+1]*m)}return 70*(c+p+f)},noise3D:function(t,e,i){var s,r,n,h,a,c,p,f,u,d,l=this.permMod12,g=this.perm,y=this.grad3,x=.3333333333333333*(t+e+i),v=Math.floor(t+x),S=Math.floor(e+x),w=Math.floor(i+x),m=(v+S+w)*o,M=t-(v-m),B=e-(S-m),b=i-(w-m);M>=B?B>=b?(a=1,c=0,p=0,f=1,u=1,d=0):M>=b?(a=1,c=0,p=0,f=1,u=0,d=1):(a=0,c=0,p=1,f=1,u=0,d=1):B<b?(a=0,c=0,p=1,f=0,u=1,d=1):M<b?(a=0,c=1,p=0,f=0,u=1,d=1):(a=0,c=1,p=0,f=1,u=1,d=0);var P=M-a+o,I=B-c+o,L=b-p+o,R=M-f+2*o,A=B-u+2*o,F=b-d+2*o,C=M-1+.5,E=B-1+.5,O=b-1+.5,U=255&v,T=255&S,k=255&w,D=.6-M*M-B*B-b*b;if(D<0)s=0;else{var Y=3*l[U+g[T+g[k]]];s=(D*=D)*D*(y[Y]*M+y[Y+1]*B+y[Y+2]*b)}var z=.6-P*P-I*I-L*L;if(z<0)r=0;else{var q=3*l[U+a+g[T+c+g[k+p]]];r=(z*=z)*z*(y[q]*P+y[q+1]*I+y[q+2]*L)}var X=.6-R*R-A*A-F*F;if(X<0)n=0;else{var N=3*l[U+f+g[T+u+g[k+d]]];n=(X*=X)*X*(y[N]*R+y[N+1]*A+y[N+2]*F)}var H=.6-C*C-E*E-O*O;if(H<0)h=0;else{var Z=3*l[U+1+g[T+1+g[k+1]]];h=(H*=H)*H*(y[Z]*C+y[Z+1]*E+y[Z+2]*O)}return 32*(s+r+n+h)},noise4D:function(t,e,i,s){var r,n,o,c,p,f,u,d,l,g,y,x,v,S,w,m,M,B=this.perm,b=this.grad4,P=(t+e+i+s)*h,I=Math.floor(t+P),L=Math.floor(e+P),R=Math.floor(i+P),A=Math.floor(s+P),F=(I+L+R+A)*a,C=t-(I-F),E=e-(L-F),O=i-(R-F),U=s-(A-F),T=0,k=0,D=0,Y=0;C>E?T++:k++,C>O?T++:D++,C>U?T++:Y++,E>O?k++:D++,E>U?k++:Y++,O>U?D++:Y++;var z=C-(f=T>=3?1:0)+a,q=E-(u=k>=3?1:0)+a,X=O-(d=D>=3?1:0)+a,N=U-(l=Y>=3?1:0)+a,H=C-(g=T>=2?1:0)+2*a,Z=E-(y=k>=2?1:0)+2*a,j=O-(x=D>=2?1:0)+2*a,G=U-(v=Y>=2?1:0)+2*a,_=C-(S=T>=1?1:0)+3*a,V=E-(w=k>=1?1:0)+3*a,K=O-(m=D>=1?1:0)+3*a,Q=U-(M=Y>=1?1:0)+3*a,J=C-1+4*a,$=E-1+4*a,W=O-1+4*a,tt=U-1+4*a,et=255&I,it=255&L,st=255&R,rt=255&A,nt=.6-C*C-E*E-O*O-U*U;if(nt<0)r=0;else{var ot=B[et+B[it+B[st+B[rt]]]]%32*4;r=(nt*=nt)*nt*(b[ot]*C+b[ot+1]*E+b[ot+2]*O+b[ot+3]*U)}var ht=.6-z*z-q*q-X*X-N*N;if(ht<0)n=0;else{var at=B[et+f+B[it+u+B[st+d+B[rt+l]]]]%32*4;n=(ht*=ht)*ht*(b[at]*z+b[at+1]*q+b[at+2]*X+b[at+3]*N)}var ct=.6-H*H-Z*Z-j*j-G*G;if(ct<0)o=0;else{var pt=B[et+g+B[it+y+B[st+x+B[rt+v]]]]%32*4;o=(ct*=ct)*ct*(b[pt]*H+b[pt+1]*Z+b[pt+2]*j+b[pt+3]*G)}var ft=.6-_*_-V*V-K*K-Q*Q;if(ft<0)c=0;else{var ut=B[et+S+B[it+w+B[st+m+B[rt+M]]]]%32*4;c=(ft*=ft)*ft*(b[ut]*_+b[ut+1]*V+b[ut+2]*K+b[ut+3]*Q)}var dt=.6-J*J-$*$-W*W-tt*tt;if(dt<0)p=0;else{var lt=B[et+1+B[it+1+B[st+1+B[rt+1]]]]%32*4;p=(dt*=dt)*dt*(b[lt]*J+b[lt+1]*$+b[lt+2]*W+b[lt+3]*tt)}return 27*(r+n+o+c+p)}},c._buildPermutationTable=p,void 0===(s=function(){return c}.call(e,i,e,t))||(t.exports=s),e.SimplexNoise=c,t.exports=c}()}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,i),n.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var s={};(()=>{var t,e;i.d(s,{Cd:()=>bt,v0:()=>e,ii:()=>t,ZA:()=>ut,x1:()=>wt,O7:()=>Rt,Dg:()=>D,qn:()=>Ut,Q_:()=>T,yo:()=>U,mg:()=>Bt,UL:()=>Mt,he:()=>It,xs:()=>lt,YM:()=>h,bn:()=>dt,pK:()=>ft,rR:()=>xt,Sj:()=>St,Xc:()=>yt,Gx:()=>gt,vI:()=>vt,rU:()=>Lt,Ux:()=>Pt,yq:()=>At,CJ:()=>mt,Sg:()=>E,B7:()=>it,aT:()=>et,uZ:()=>K,db:()=>st,NZ:()=>ot,sX:()=>nt,t7:()=>V,cM:()=>O,wQ:()=>k,tF:()=>$,zO:()=>j,tm:()=>rt,MX:()=>tt,Sr:()=>Q,yx:()=>G,Yr:()=>_}),function(t){t[t.Ring=1]="Ring",t[t.Matrix=2]="Matrix"}(t||(t={})),function(t){t[t.Relative=1]="Relative",t[t.Fixed=2]="Fixed"}(e||(e={}));var r="undefined"!=typeof Float32Array?Float32Array:Array;function n(t){r=t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});let o=0;class h{constructor(t){this.generateId=-1,this.id=t.id??++o,this.type=t.type||"SceneChild",this.name=t.name||this.type+"_"+this.id,this.data=t.data||{},this.props={}}find(t){return this.id===t||this.name===t?this:null}getProps(){return this.props}getProp(t,e,i){return this.props[t]??i}hasProp(t){return void 0!==this.props[t]}setPropUnsafe(t,e){"string"==typeof t?this.props[t]=e:Object.keys(t).forEach((e=>this.props[e]=t[e]))}}function a(){var t=new r(16);return r!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function p(t,e,i){var s=e[0],r=e[1],n=e[2],o=e[3],h=e[4],a=e[5],c=e[6],p=e[7],f=e[8],u=e[9],d=e[10],l=e[11],g=e[12],y=e[13],x=e[14],v=e[15],S=i[0],w=i[1],m=i[2],M=i[3];return t[0]=S*s+w*h+m*f+M*g,t[1]=S*r+w*a+m*u+M*y,t[2]=S*n+w*c+m*d+M*x,t[3]=S*o+w*p+m*l+M*v,S=i[4],w=i[5],m=i[6],M=i[7],t[4]=S*s+w*h+m*f+M*g,t[5]=S*r+w*a+m*u+M*y,t[6]=S*n+w*c+m*d+M*x,t[7]=S*o+w*p+m*l+M*v,S=i[8],w=i[9],m=i[10],M=i[11],t[8]=S*s+w*h+m*f+M*g,t[9]=S*r+w*a+m*u+M*y,t[10]=S*n+w*c+m*d+M*x,t[11]=S*o+w*p+m*l+M*v,S=i[12],w=i[13],m=i[14],M=i[15],t[12]=S*s+w*h+m*f+M*g,t[13]=S*r+w*a+m*u+M*y,t[14]=S*n+w*c+m*d+M*x,t[15]=S*o+w*p+m*l+M*v,t}function f(t,e,i){var s,r,n,o,h,a,c,p,f,u,d,l,g=i[0],y=i[1],x=i[2];return e===t?(t[12]=e[0]*g+e[4]*y+e[8]*x+e[12],t[13]=e[1]*g+e[5]*y+e[9]*x+e[13],t[14]=e[2]*g+e[6]*y+e[10]*x+e[14],t[15]=e[3]*g+e[7]*y+e[11]*x+e[15]):(s=e[0],r=e[1],n=e[2],o=e[3],h=e[4],a=e[5],c=e[6],p=e[7],f=e[8],u=e[9],d=e[10],l=e[11],t[0]=s,t[1]=r,t[2]=n,t[3]=o,t[4]=h,t[5]=a,t[6]=c,t[7]=p,t[8]=f,t[9]=u,t[10]=d,t[11]=l,t[12]=s*g+h*y+f*x+e[12],t[13]=r*g+a*y+u*x+e[13],t[14]=n*g+c*y+d*x+e[14],t[15]=o*g+p*y+l*x+e[15]),t}function u(t,e,i){var s=i[0],r=i[1],n=i[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function d(t,e,i){var s=Math.sin(i),r=Math.cos(i),n=e[4],o=e[5],h=e[6],a=e[7],c=e[8],p=e[9],f=e[10],u=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*r+c*s,t[5]=o*r+p*s,t[6]=h*r+f*s,t[7]=a*r+u*s,t[8]=c*r-n*s,t[9]=p*r-o*s,t[10]=f*r-h*s,t[11]=u*r-a*s,t}function l(t,e,i){var s=Math.sin(i),r=Math.cos(i),n=e[0],o=e[1],h=e[2],a=e[3],c=e[8],p=e[9],f=e[10],u=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*r-c*s,t[1]=o*r-p*s,t[2]=h*r-f*s,t[3]=a*r-u*s,t[8]=n*s+c*r,t[9]=o*s+p*r,t[10]=h*s+f*r,t[11]=a*s+u*r,t}function g(t,e,i){var s=Math.sin(i),r=Math.cos(i),n=e[0],o=e[1],h=e[2],a=e[3],c=e[4],p=e[5],f=e[6],u=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*r+c*s,t[1]=o*r+p*s,t[2]=h*r+f*s,t[3]=a*r+u*s,t[4]=c*r-n*s,t[5]=p*r-o*s,t[6]=f*r-h*s,t[7]=u*r-a*s,t}function y(t,e,i,s,r){var n,o=1/Math.tan(e/2);return t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(n=1/(s-r),t[10]=(r+s)*n,t[14]=2*r*s*n):(t[10]=-1,t[14]=-2*s),t}var x;function v(t,e,i){var s=new r(3);return s[0]=t,s[1]=e,s[2]=i,s}function S(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function w(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function m(t,e,i){var s=e[0],r=e[1],n=e[2],o=i[3]*s+i[7]*r+i[11]*n+i[15];return o=o||1,t[0]=(i[0]*s+i[4]*r+i[8]*n+i[12])/o,t[1]=(i[1]*s+i[5]*r+i[9]*n+i[13])/o,t[2]=(i[2]*s+i[6]*r+i[10]*n+i[14])/o,t}function M(t,e,i,s){var r=[],n=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],n[0]=r[0]*Math.cos(s)-r[1]*Math.sin(s),n[1]=r[0]*Math.sin(s)+r[1]*Math.cos(s),n[2]=r[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}x=new r(2),r!=Float32Array&&(x[0]=0,x[1]=0);var B=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t};!function(){var t=new r(3);r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0)}();const b=[0,0,0],P=[0,0],I=[1,1];function L(t,e){return t[0]=1,t[1]=Math.tan(e[1]),t[2]=0,t[3]=0,t[4]=Math.tan(e[0]),t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(t){return Array.isArray(t)?[t[0],t[1]]:[t,t]}function A(t,e=0){return Array.isArray(t)?[t[0],t[1],e]:[t,t,e]}n(Array);const F=new Array(4),C={from:(t=0,e)=>{const i=new Array(2);return"number"==typeof t?(i[0]=t,i[1]=e??t):(i[0]=t[0],i[1]=t[1]),i},normalize:t=>{const e=C.length(t);return 0!==e?[t[0]/e,t[1]/e]:[0,0]},distance:(t,e)=>Math.hypot(t[0]-e[0],t[1]-e[1]),dot:(t,e)=>t[0]*e[0]+t[1]*e[1],length:t=>Math.hypot(t[0],t[1]),angle:(t,e)=>(t=C.normalize(t),e=C.normalize(e),Math.acos(C.dot(t,e))),skewX:(t,e)=>{t[0]+=Math.tan(e)*t[1]},skewY:(t,e)=>{t[1]+=Math.tan(e)*t[0]},squeezeX:(t,e)=>{t[1]+=t[1]*(t[0]*-e)},squeezeY:(t,e)=>{t[0]+=t[0]*(t[1]*e)},rotate:(t,e,i)=>{const s=t[0]-i[0],r=t[1]-i[1];t[0]=s*e[0]+r*e[1]+i[0],t[1]=s*e[2]+r*e[3]+i[1]},rotateX:(t,e,i)=>{F[0]=1,F[1]=0,F[2]=0,F[3]=Math.cos(i),C.rotate(t,F,e)},rotateY:(t,e,i)=>{F[0]=Math.cos(i),F[1]=0,F[2]=0,F[3]=1,C.rotate(t,F,e)},rotateZ:(t,e,i)=>{F[0]=Math.cos(i),F[1]=-Math.sin(i),F[2]=Math.sin(i),F[3]=Math.cos(i),C.rotate(t,F,e)},translate:(t,e)=>{t[0]+=e[0],t[1]+=e[1]},scale:(t,e)=>{t[0]*=e[0],t[1]*=e[1]},divide:(t,e)=>{t[0]/=e[0],t[1]/=e[1]},toString:t=>`x: ${t[0]}, y: ${t[1]}`,ZERO:Array.from([0,0]),ONE:Array.from([1,1])},E=C,O=(t,e)=>Math.log(t)/Math.log(e),U=2*Math.PI,T=(1+Math.sqrt(5))/2,k=(t,e)=>{const i=t%e;return i<0?i+e:i};class D{}var Y;!function(t){t[t.None=0]="None",t[t.Scale=2]="Scale",t[t.Center=4]="Center",t[t.Fill=8]="Fill"}(Y||(Y={}));const z=(t,e,i)=>{(void 0===t[0]||e<t[0])&&(t[0]=e),(void 0===t[2]||e>t[2])&&(t[2]=e),(void 0===t[1]||i<t[1])&&(t[1]=i),(void 0===t[3]||i>t[3])&&(t[3]=i)},q=(t,e)=>{void 0!==e[0]&&void 0!==e[1]&&void 0!==e[2]&&void 0!==e[3]?void 0===t[0]||void 0===t[1]||void 0===t[2]||void 0===t[3]?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):(t[0]<e[0]&&(t[0]=e[0]),t[2]>e[2]&&(t[2]=e[2]),t[1]<e[1]&&(t[1]=e[1]),t[3]>e[3]&&(t[3]=e[3])):console.warn("[Urplfanze:Bounding] cannot sum bounding")},X=(t,e)=>{void 0!==e[0]&&void 0!==e[1]&&void 0!==e[2]&&void 0!==e[3]?(t.x=e[0],t.y=e[1],t.width=e[2]-e[0],t.height=e[3]-e[1],t.cx=t.x+t.width/2,t.cy=t.y+t.height/2):console.warn("[Urplfanze:Bounding] cannot bind bounding")};class N extends D{constructor(t){super(),this.mode=t.mode||Y.Fill,this.rect=t.rect}apply(t,e){return N.adapt(t,this.mode,this.rect)}static adapt(t,e,i){if(e===Y.None)return Float32Array.from(t);const s=new Float32Array(t.length);i||(i=N.getBounding(t));const r=i.width>=2||i.height>=2||e>=Y.Fill&&(i.width<2||i.height<2)?2/Math.max(i.width,i.height):1,n=e>=Y.Center?i.cx:0,o=e>=Y.Center?i.cy:0;for(let e=0,i=t.length;e<i;e+=2)s[e]=(t[e]-n)*r,s[e+1]=(t[e+1]-o)*r;return s}static getBounding(t,e){void 0===e&&(e={cx:0,cy:0,x:-1,y:-1,width:2,height:2});const i=[void 0,void 0,void 0,void 0];for(let e=0,s=t.length;e<s;e+=2)z(i,t[e],t[e+1]);return X(e,i),e}}N.MODES=Y;var H=i(21);const Z="undefined"!=typeof performance?performance:Date;function j(){return Z.now()}function G(t){return 180*t/Math.PI}function _(t){return t*Math.PI/180}function V(t,e,i){return(1-i)*t+i*e}function K(t,e,i){return i<=t?t:i>=e?e:i}function Q(t,e,i,s,r){return K(s,r,(i-t)/(e-t)*(r-s)+s)}const J={random:new H(Math.random)};function $(t="random",e=0,i=0,s=0){return void 0===J[t]&&(J[t]=new H(t)),J[t].noise3D(e,i,s)}const W={};function tt(t,e=0,i=1,s){const r=t+"";if(void 0===W[r]){const t=function(t){let e=0,i=1779033703^t.length;for(;e<t.length;e++)i=Math.imul(i^t.charCodeAt(e),3432918353),i=i<<13|i>>>19;return function(){return i=Math.imul(i^i>>>16,2246822507),i=Math.imul(i^i>>>13,3266489909),(i^=i>>>16)>>>0}}(r);W[r]=(n=t(),o=t(),h=t(),a=t(),function(){let t=(n>>>=0)+(o>>>=0)|0;return n=o^o>>>9,o=(h>>>=0)+(h<<3)|0,t=t+(a=1+(a>>>=0)|0)|0,h=(h=h<<21|h>>>11)+t|0,(t>>>0)/4294967296})}var n,o,h,a;const c=e+W[r]()*(i-e);return void 0!==s?Math.round(c*10**s)/10**s:c}function et(e,i=[0,0]){if(e.type===t.Matrix){const t=[(e.col.count-1)/2,(e.row.count-1)/2];t[0]+=t[0]*i[0],t[1]+=t[1]*i[1];const s=e.col.index-1-t[0],r=e.row.index-1-t[1];return 0===s?0:Math.atan(r/s)}return(e.angle-Math.PI)/2}function it(e,i=[0,0]){if(e.type===t.Matrix){const t=[(e.col.count-1)/2,(e.row.count-1)/2];t[0]+=t[0]*i[0],t[1]+=t[1]*i[1];const s=e.col.index-1-t[0],r=e.row.index-1-t[1];return 0===s?0:Math.atan2(r,s)}return e.angle-Math.PI}function st(e,i=[0,0]){if(e.type===t.Matrix){const t=[.5,.5];t[0]+=t[0]*i[0],t[1]+=t[1]*i[1];const s=[e.col.offset,e.row.offset];return E.distance(s,t)}return 1}function rt(t,e){const i=t.length,s=e.length;if(i===s)return[t,e];const r=Math.abs(i-s),n=i<s?e:t,o=ot(i<s?t:e,Math.floor(r/2));return i>s?[n,o]:[o,n]}function nt(t,e,i=.5){const[s,r]=rt(t,e),n=Math.max(s.length,r.length),o="number"==typeof i?[i]:i,h=n/2;if(o.length!==h){const t=o.length;for(let e=0;e<h;e++)o[e]=o[e%t]}const a=new Float32Array(n);for(let t=0,e=0;t<n;t+=2,e++)a[t]=(1-o[e])*s[t]+o[e]*r[t],a[t+1]=(1-o[e])*s[t+1]+o[e]*r[t+1];return a}function ot(t,e){const i=t.length,s=i/2,r=2*(s+e),n=s-1;if(n>1){const s=i-2,o=Math.floor(e/n);let h=(r-(i+o*s))/2;const a=Math.round(n/h),c=new Float32Array(r);for(let e=0,i=0,r=0;e<s;e+=2,i++,r+=2){const n=t[e],p=t[e+1],f=t[e+2],u=t[e+3];c[r]=n,c[r+1]=p;const d=h>0&&(i%a==0||e===s-2),l=o+(d?1:0),g=1/(l+1);for(let t=0;t<l;t++,r+=2){const e=g*(t+1);c[r+2]=(1-e)*n+e*f,c[r+3]=(1-e)*p+e*u}d&&h--}return c[r-2]=t[i-2],c[r-1]=t[i-1],c}const o=new Float32Array(r);for(let e=0;e<r;e+=2)o[e]=t[e%i],o[e+1]=t[(e+1)%i];return o}const ht=a(),at=a(),ct=a(),pt=a();class ft extends h{constructor(t={}){super(t),this.bIndexed=!1,this.indexedBuffer=[],this.bounding={cx:0,cy:0,x:-1,y:-1,width:2,height:2},this.props={distance:t.distance,repetitions:t.repetitions,rotateX:t.rotateX,rotateY:t.rotateY,rotateZ:t.rotateZ,skewX:t.skewX,skewY:t.skewY,squeezeX:t.squeezeX,squeezeY:t.squeezeY,displace:t.displace,translate:t.translate,scale:t.scale,transformOrigin:t.transformOrigin,perspective:t.perspective,perspectiveOrigin:t.perspectiveOrigin},this.vertexCallback=t.vertexCallback,this.boundingType=t.boundingType||e.Fixed}isStatic(){const t=this.props;return"function"!=typeof t.repetitions&&"function"!=typeof t.distance&&"function"!=typeof t.displace&&"function"!=typeof t.scale&&"function"!=typeof t.translate&&"function"!=typeof t.skewX&&"function"!=typeof t.skewY&&"function"!=typeof t.squeezeX&&"function"!=typeof t.squeezeY&&"function"!=typeof t.rotateX&&"function"!=typeof t.rotateY&&"function"!=typeof t.rotateZ&&"function"!=typeof t.transformOrigin&&"function"!=typeof t.perspective&&"function"!=typeof t.perspectiveOrigin}isStaticIndexed(){return"function"!=typeof this.props.repetitions}getProp(t,e,i){let s=this.props[t];return"function"==typeof s&&(s=s(e)),void 0===s||Number.isNaN(s)?i:s}setProp(t,e,i=!1){"string"==typeof t?(i=i||"repetitions"==t,this.props[t]=e):(i=i||"repetitions"in t,Object.keys(t).forEach((e=>this.props[e]=t[e]))),this.clearBuffer(i,!0)}clearBuffer(t=!1,e=!0){if(this.buffer=void 0,t&&(this.bIndexed=!1,this.indexedBuffer=[]),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed(),e&&this.scene&&!this.scene.isFirstLevelChild(this)){const i=this.scene.getParentsOfSceneChild(this);i.length>0&&i[i.length-1].clearBuffer(t,e)}}generate(i=0,s=!1,n){if(this.buffer&&this.bStatic)return;this.generateId=i,this.bStaticIndexed&&this.bIndexed||(this.indexedBuffer=[]);const o=ft.getEmptyPropArguments(this,n),h=o.repetition,a=this.getProp("repetitions",o,1),x=Array.isArray(a)?t.Matrix:t.Ring,F=Array.isArray(a)?a[0]*(a[1]??a[0]):a,C=Array.isArray(a)?a[0]:F,O=Array.isArray(a)?a[1]??a[0]:1,T=h.row;T.count=C;const k=h.col;k.count=O,h.count=F,h.col.count=O,h.row.count=C,h.type=x;let D=0;const Y=[];let N=0;const H=function(t,e){var i=new r(2);return i[0]=t,i[1]=e,i}((O-1)/2,(C-1)/2),Z=this.scene?[this.scene.anchor[0],this.scene.anchor[1],0]:[0,0,0],j=[void 0,void 0,void 0,void 0],G=[void 0,void 0,void 0,void 0];for(let r=0;r<C;r++)for(let n=0;n<O;n++,N++){h.index=N+1,h.offset=F>1?N/(F-1):1,h.angle=x===t.Ring?U/F*N:0,k.index=n+1,k.offset=O>1?n/(O-1):1,T.index=r+1,T.offset=C>1?r/(C-1):1;const a=this.generateBuffer(i,o),V=a.length,Q=this.getShapeBounding();Y[N]=new Float32Array(V),D+=V;{const i=R(this.getProp("distance",o,P)),F=this.getProp("displace",o,0),C=A(this.getProp("scale",o,I),1),O=A(this.getProp("translate",o,P),0),U=this.getProp("skewX",o,0),T=this.getProp("skewY",o,0),k=this.getProp("squeezeX",o,0),D=this.getProp("squeezeY",o,0),q=this.getProp("rotateX",o,0),X=this.getProp("rotateY",o,0),j=this.getProp("rotateZ",o,0),J=K(0,1,this.getProp("perspective",o,0)),$=A(this.getProp("perspectiveOrigin",o,P),0),W=A(this.getProp("transformOrigin",o,P),0);let tt;switch(x){case t.Ring:tt=v(i[0],0,0),M(tt,tt,b,h.angle+F);break;case t.Matrix:tt=v(i[1]*(n-H[0]),i[0]*(r-H[1]),0)}const et=J>0?Math.max(Q.width,Q.height)/2:1,it=J>0?et+10*et*(1-J):0,st=this.boundingType!==e.Relative||0!==Q.cx||0!==Q.cy||0!==J||0!==W[0]||0!==W[1],rt=0!==$[0]||0!==$[1];st&&(this.boundingType===e.Relative?(W[0]=W[0]*(Q.width/2)+Q.cx,W[1]=W[1]*(Q.height/2)+Q.cy):(W[0]*=Q.width/2,W[1]*=Q.height/2),W[2]=it),c(at),st&&f(at,at,W),0===O[0]&&0===O[1]||f(at,at,O),0===U&&0===T||(L(ht,[U,T]),p(at,at,ht)),0!==q&&d(at,at,q),0!==X&&l(at,at,X),0!==j&&g(at,at,j),1===C[0]&&1===C[1]||u(at,at,C),st&&f(at,at,w(W,W,-1)),it>0&&(rt&&(this.boundingType===e.Relative?($[0]=$[0]*(Q.width/2)+Q.cx,$[1]=$[1]*(Q.height/2)+Q.cy):($[0]*=Q.width/2,$[1]*=Q.height/2),$[2]=0),y(ct,-Math.PI/2,1,0,1/0)),c(pt),f(pt,pt,tt),s&&f(pt,pt,Z),x===t.Ring&&g(pt,pt,h.angle+F),(_=G)[0]=void 0,_[1]=void 0,_[2]=void 0,_[3]=void 0;for(let t=0;t<V;t+=2){const e=[a[t],a[t+1],it];if(0!==k&&E.squeezeX(e,k),0!==D&&E.squeezeY(e,D),m(e,e,at),it>0&&(rt&&S(e,e,$),m(e,e,ct),w(e,e,it),rt&&B(e,e,$)),m(e,e,pt),this.vertexCallback){const i=t/2,s=V/2,r={index:i+1,count:s,offset:s>1?i/(s-1):1};this.vertexCallback(e,r,o)}Y[N][t]=e[0],Y[N][t+1]=e[1],z(G,e[0],e[1])}}q(j,G);const J={cx:0,cy:0,x:-1,y:-1,width:2,height:2};X(J,G),this.bStaticIndexed&&this.bIndexed||this.addIndex(V,h,J)}var _;X(this.bounding,j),this.buffer=new Float32Array(D);for(let t=0,e=0,i=Y.length;t<i;e+=Y[t].length,t++)this.buffer.set(Y[t],e);this.bIndexed=!0}getBounding(){return this.bounding}getRepetitionCount(){const t=this.getProp("repetitions",void 0,1);return Array.isArray(t)?t[0]*(t[1]??t[0]):t}getBuffer(){return this.buffer}getIndexedBuffer(){return this.indexedBuffer}static getIndexParentLevel(t){if(void 0===t.parent)return 0;let e=t.parent,i=1;for(;void 0!==e.parent;)i++,e=e.parent;return i}stream(t){if(this.buffer&&this.indexedBuffer)for(let e=0,i=0,s=this.indexedBuffer.length;e<s;e++){const r=this.indexedBuffer[e];t({buffer:this.buffer,frameLength:r.frameLength,frameBufferIndex:i,currentIndexing:r,currentShapeIndex:e,totalShapes:s}),i+=r.frameLength}}static getEmptyPropArguments(e,i){return{repetition:{type:t.Ring,angle:0,index:1,offset:1,count:1,row:{index:1,offset:1,count:1},col:{index:1,offset:1,count:1}},shape:e,parent:i}}}ft.EMPTY_BUFFER=new Float32Array(0),ft.getEmptySimpleRepetition=()=>({index:1,offset:1,count:1}),ft.getEmptyRepetition=()=>({type:t.Ring,angle:0,...ft.getEmptySimpleRepetition(),row:ft.getEmptySimpleRepetition(),col:ft.getEmptySimpleRepetition()});class ut extends h{constructor(t={}){t.type="Group",super(t),this.children=[],["id","name","data","order","type"].forEach((e=>{e in t&&delete t[e]})),this.props=t}isStatic(){const t=this.children;for(let e=0,i=t.length;e<i;e++)if(!t[e].isStatic())return!1;return!0}isStaticIndexed(){const t=this.children;for(let e=0,i=t.length;e<i;e++)if(!t[e].isStaticIndexed())return!1;return!0}add(...t){for(let e=0,i=t.length;e<i;e++){const i=t[e],s=i.getProps();Object.keys(this.props).forEach((t=>{void 0===s[t]&&i.setProp(t,this.props[t])})),i.order=void 0!==i.order?i.order:this.children.length>0?Math.max.apply(this,this.children.map((t=>t.order||0)))+1:0,this.scene&&lt.propagateToChilden(i,this.scene),this.children.push(i)}this.sortChildren()}sortChildren(){this.children.sort(((t,e)=>t.order-e.order)),this.children=this.children.map(((t,e)=>(t.order=e,t))),this.clearBuffer(!0)}getChildren(){return this.children}find(t){if(this.id===t||this.name===t)return this;const e=this.getChildren();for(let i=0,s=e.length;i<s;i++){const s=e[i].find(t);if(null!==s)return s}return null}get(t){return t>=0&&t<this.children.length?this.children[t]:null}remove(t){if(t>=0&&t<this.children.length){const e=this.children.splice(t,1);return this.clearBuffer(!0),e}return!1}removeFromId(t){for(let e=0,i=this.children.length;e<i;e++)if(this.children[e].id==t)return this.children.splice(e,1),this.clearBuffer(!0)}generate(t,e=!1,i){this.generateId=t,this.children.forEach((s=>s.generate(t,e,i)))}getBounding(){const t=[],e={cx:0,cy:0,x:-1,y:-1,width:2,height:2};if(this.children.length>0){this.children.forEach((e=>t.push(e.getBounding())));for(let i=0,s=this.children.length;i<s;i++)e.x=e.x>t[i].x?t[i].x:e.x,e.y=e.y>t[i].y?t[i].y:e.y,e.width=e.width<t[i].width?t[i].width:e.width,e.height=e.height<t[i].height?t[i].height:e.height;e.cx=e.x+e.width/2,e.cy=e.y+e.height/2}return e}clearBuffer(t=!1,e=!0){if(this.children.forEach((e=>e.clearBuffer(t,!1))),this.scene&&e){const i=this.scene.getParentsOfSceneChild(this);i.length>0&&i[i.length-1].clearBuffer(t,e)}}setProp(t,e){"object"==typeof t?Object.keys(t).forEach((e=>this.props[e]=t[e])):this.props[t]=e,this.children.forEach((i=>i.setProp(t,e)))}setPropUnsafe(t,e){super.setPropUnsafe(t,e),this.children.forEach((i=>i.setPropUnsafe(t,e)))}getBufferLength(t){return this.children.map((e=>e.getBufferLength(t))).reduce(((t,e)=>t+e),0)}getBuffer(){const t=this.children.map((t=>t.getBuffer())).filter((t=>void 0!==t)),e=t.reduce(((t,e)=>t+e.length),0);if(e>0){const i=new Float32Array(e);i.set(t[0],0);for(let e=1,s=0,r=t.length;e<r;e++)s+=t[e-1].length,i.set(t[e],s);return i}return ft.EMPTY_BUFFER}getIndexedBuffer(){const t=this.children.map((t=>t.getIndexedBuffer())).filter((t=>void 0!==t));return[].concat.apply([],t)}stream(t){this.children.forEach((e=>e.stream(t)))}}class dt extends ft{constructor(t){t.type=t.type||"Shape",super(t),t.shape instanceof h?this.shape=t.shape:console.warn("[Urpflanze:Shape] requires the 'shape' property to be instance of SceneChild,\nYou passed:",t.shape),this.shapeUseParent=!!t.shapeUseParent,this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}isStatic(){return super.isStatic()&&(!this.shape||this.shape.isStatic())}isStaticIndexed(){return super.isStaticIndexed()&&(!this.shape||this.shape.isStaticIndexed())}find(t){return this.id===t||this.name===t?this:this.shape?this.shape.find(t):null}getBufferLength(t){return this.bStatic&&this.buffer&&this.buffer.length>0?this.buffer.length:(this.shape?this.shape.getBufferLength(t):0)*this.getRepetitionCount()}generateBuffer(t,e){return this.shape?((this.shapeUseParent||this.shape.generateId!==t)&&(this.shapeUseParent&&this.shape.clearBuffer(!0,!1),this.shape.generate(t,!1,e)),this.shape.getBuffer()):dt.EMPTY_BUFFER}getShapeBounding(){return this.shape?this.shape.getBounding():this.bounding}addIndex(t,e,i){if(this.shape){const s=this.shape.getIndexedBuffer()||[],r={shape:this,frameLength:t,singleRepetitionBounding:i,repetition:{type:e.type,angle:e.angle,index:e.index,count:e.count,offset:e.offset,row:{index:e.row.index,count:e.row.count,offset:e.row.offset},col:{index:e.col.index,count:e.col.count,offset:e.col.offset}}};for(let t=0,e=s.length;t<e;t++){const e={...s[t]},i=e.parent?dt.setIndexedParent(e.parent,r):r;this.indexedBuffer.push({...e,parent:i})}}}static setIndexedParent(t,e){const i={...t};return i.parent=t.parent?dt.setIndexedParent(t.parent,e):e,i}setShape(t){void 0===t?(this.shape=void 0,this.clearBuffer(!0,!0)):(this.scene&&lt.propagateToChilden(t,this.scene),this.shape=t,this.shape.clearBuffer(!0,!0))}}class lt{constructor(t={}){this.width=400,this.height=400,this.background="hsla(0, 0%, 0%, 1)",this.color="hsla(0, 0%, 100%, 1)",this.currentTime=0,void 0!==t.width&&(this.width=t.width),void 0!==t.height&&(this.height=t.height),void 0!==t.background&&(this.background=t.background),void 0!==t.color&&(this.color=t.color),this.children=[],this.center=[this.width/2,this.height/2],this.anchor=[t.anchor&&"center"!==t.anchor[0]?"left"===t.anchor[0]?0:this.width:this.center[0],t.anchor&&"center"!==t.anchor[1]?"top"===t.anchor[1]?0:this.height:this.center[1]]}getWidth(t=100){return this.width*t/100}getHeight(t=100){return this.height*t/100}resize(t,e=t){this.width=t,this.height=e,this.center=[this.width/2,this.height/2];const i=[this.width/this.anchor[0],this.height/this.anchor[1]];this.anchor=[this.width/i[0],this.height/i[1]],this.children.forEach((t=>t.clearBuffer(!0,!1)))}update(t=0){this.currentTime=t;for(let t=0,e=this.children.length;t<e;t++)this.children[t].generate(this.currentTime,!0)}stream(t){this.children.forEach((e=>e.stream(t)))}getChildren(){return this.children}add(...t){const e="number"==typeof t[t.length-1]?t[t.length-1]:void 0,i=t.length-(void 0===e?0:1);for(let s=0;s<i;s++){const i=t[s];i.order=void 0!==e?e+s:void 0!==i.order?i.order:this.children.length>0?Math.max.apply(this,this.children.map((t=>t.order||0)))+1:0,lt.propagateToChilden(i,this),this.children.push(i),i.clearBuffer(!0,!1),i.generate(0,!0)}this.sortChildren()}sortChildren(){this.children.sort(((t,e)=>t.order-e.order)),this.children=this.children.map(((t,e)=>(t.order=e,t)))}find(t){const e=this.getChildren();for(let i=0,s=e.length;i<s;i++){const s=e[i].find(t);if(null!==s)return s}return null}get(t){return t>=0&&t<this.children.length?this.children[t]:null}remove(t){t>=0&&t<this.children.length&&this.children.splice(t,1)}removeChildren(){this.children=[]}removeFromId(t){for(let e=0,i=this.children.length;e<i;e++)if(this.children[e].id===t||this.children[e].name===t)return void this.children.splice(e,1)}isFirstLevelChild(t){for(let e=0,i=this.children.length;e<i;e++)if(this.children[e].id===t.id)return!0;const e=this.getParentsOfSceneChild(t);return 1===e.length&&e[0]instanceof ut}getParentsOfSceneChild(t){const e=lt.getParentsOfSceneChild(this,t);return e?(e.splice(0,1),e):[]}static getParentsOfSceneChild(t,e,i=[]){let s;if(t instanceof h){if(t.id==e.id)return i;if(t instanceof dt&&t.shape){const r=i.slice();if(r.push(t),s=lt.getParentsOfSceneChild(t.shape,e,r))return s}}if(t instanceof lt||t instanceof ut){const r=t.getChildren();i.push(t);for(let t=0,n=r.length;t<n;t++){const n=r[t];if(s=lt.getParentsOfSceneChild(n,e,i))return s}i.pop()}return null}static walk(t,e){if(e instanceof h){if(!1===t(e))return!1;if(e instanceof dt&&e.shape&&!1===lt.walk(t,e.shape))return!1}if(e instanceof lt||e instanceof ut){const i=e.getChildren();for(let e=0,s=i.length;e<s;e++){const s=i[e];if(!1===lt.walk(t,s))return!1}}}static propagateToChilden(t,e){t.scene=e,t instanceof ut?t.getChildren().forEach((t=>{lt.propagateToChilden(t,e)})):t instanceof dt&&t.shape&&(t.shape.scene=e,lt.propagateToChilden(t.shape,e))}}class gt extends ft{constructor(t={}){super(t),this.currentGenerationPrimitiveBounding={cx:0,cy:0,x:-1,y:-1,width:2,height:2},this.props.sideLength=void 0===t.sideLength?void 0:"function"==typeof t.sideLength?t.sideLength:R(t.sideLength),this.drawer=t.drawer||{},this.modifiers=t.modifiers,this.bClosed=t.bClosed??!0}isStatic(){return"function"!=typeof this.props.sideLength&&super.isStatic()}getRepetitionSideLength(t){return this.bStatic?(void 0===this.props.sideLength?this.props.sideLength=[50,50]:"number"==typeof this.props.sideLength&&(this.props.sideLength=[this.props.sideLength,this.props.sideLength]),this.props.sideLength):R(this.getProp("sideLength",t,[50,50]))}applyModifiers(t,e){if(void 0===this.modifiers)return t;let i=t;const s=Array.isArray(this.modifiers)?this.modifiers:[this.modifiers];for(let t=0,r=s.length;t<r;t++)i=(s[t]instanceof D?s[t]:s[t](e)).apply(i,this.bClosed,this);return i}getShapeBounding(){return this.currentGenerationPrimitiveBounding}addIndex(t,e,i){const s={shape:this,frameLength:t,singleRepetitionBounding:i,repetition:{type:e.type,angle:e.angle,index:e.index,count:e.count,offset:e.offset,row:{index:e.row.index,count:e.row.count,offset:e.row.offset},col:{index:e.col.index,count:e.col.count,offset:e.col.offset}}};this.indexedBuffer.push(s)}isClosed(){return this.bClosed}setClosed(t){this.bClosed=t}}class yt extends gt{constructor(t={},e=!1){t.type=t.type||"ShapeLoop",super(t),this.loopDependencies=(t.loopDependencies||[]).concat("sideLength"),this.props.loop=t.loop,e||(this.loop={start:0,end:U,inc:U/10,vertex:()=>[0,0]},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed())}isStaticLoop(){if(this.loopDependencies.includes("propArguments"))return!1;for(let t=0,e=this.loopDependencies.length;t<e;t++)if("function"==typeof this.props[this.loopDependencies[t]])return!1;return!0}isStatic(){return this.bStaticLoop&&super.isStatic()}isStaticIndexed(){return super.isStaticIndexed()&&(void 0===this.props.loop||"function"!=typeof this.props.loop.start&&"function"!=typeof this.props.loop.end&&"function"!=typeof this.props.loop.inc)}clearBuffer(t=!1,e=!0){this.bStaticLoop=this.isStaticLoop(),t&&(this.currentOrSingleLoopBuffer=void 0),super.clearBuffer(t,e)}setProp(t,e){let i=!1;const s="string"==typeof t?{[t]:e}:t;for(let t=this.loopDependencies.length-1;t>=0;t--)if(this.loopDependencies[t]in s){i=!0;break}"loop"in s&&(s.loop={...this.props.loop,...s.loop},i=!0),super.setProp(s,e,i)}getBufferLength(t){if(this.bStatic&&void 0!==this.buffer)return this.buffer.length;if(this.bStaticLoop&&void 0!==this.currentOrSingleLoopBuffer)return this.currentOrSingleLoopBuffer.length*this.getRepetitionCount();const{count:e}=this.getLoop(t||ft.getEmptyPropArguments(this));return this.getRepetitionCount()*e*2}generateBuffer(t,e){return this.bStaticLoop?("function"!=typeof this.props.sideLength&&void 0!==this.currentOrSingleLoopBuffer||(this.currentOrSingleLoopBuffer=this.generateLoopBuffer(e)),this.currentOrSingleLoopBuffer):this.generateLoopBuffer(e)}generateLoopBuffer(t){const{start:e,inc:i,count:s}=this.getLoop(t),r=this.getRepetitionSideLength(t),n=this.props.loop&&this.props.loop.vertex?this.props.loop.vertex:this.loop.vertex,o={index:0,offset:0,current:0,count:s},h=o.count,a=new Float32Array(2*h);for(let s=0,r=0;s<h;s++,r+=2){const h=e+i*s,c=o.count>1?s/(o.count-1):1;o.current=h,o.index=s+1,o.offset=c;const p=n(o,t);a[r]=p[0],a[r+1]=p[1]}const c=[void 0,void 0,void 0,void 0],p=this.applyModifiers(a,t);for(let t=0,e=p.length;t<e;t+=2)p[t]=p[t]*r[0],p[t+1]=p[t+1]*r[1],z(c,p[t],p[t+1]);return X(this.currentGenerationPrimitiveBounding,c),p}getLoop(t){let e=this.props.loop?.start??this.loop.start,i=this.props.loop?.end??this.loop.end,s=this.props.loop?.inc??this.loop.inc;e="function"==typeof e?e(t):e,i="function"==typeof i?i(t):i,s="function"==typeof s?s(t):s;const r=Math.ceil((i-e)/s);return{start:e,end:i,inc:s,count:r<=0?0:r}}setShape(t){this.setProp("loop",t)}static getBuffer(t){const e=new this({...t,sideLength:t.sideLength||1});return e.generate(),e.getBuffer()||new Float32Array}}yt.PId2=Math.PI/2;class xt extends gt{constructor(t={}){t.type=t.type||"ShapeBuffer",t.adaptMode=t.adaptMode??Y.Scale,super(t),this.adaptMode=t.adaptMode??Y.Fill,void 0===t.shape?(console.warn("[Urpflanze:ShapeBuffer] ShapeBuffer require a buffer passed from `shape` property"),this.shape=xt.EMPTY_BUFFER):this.shape="function"!=typeof t.shape?N.adapt(t.shape,this.adaptMode):t.shape,this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}isStatic(){return"function"!=typeof this.shape&&super.isStatic()}isStaticIndexed(){return"function"!=typeof this.shape&&super.isStaticIndexed()}clearBuffer(t=!1,e=!0){super.clearBuffer(t,e),this.shapeBuffer=void 0}bindBuffer(t){const e=this.getRepetitionSideLength(t),i=this.applyModifiers(Float32Array.from("function"==typeof this.shape?this.shape(t):this.shape),t),s=[void 0,void 0,void 0,void 0];for(let t=0,r=i.length;t<r;t+=2)i[t]=i[t]*e[0],i[t+1]=i[t+1]*e[1],z(s,i[t],i[t+1]);X(this.currentGenerationPrimitiveBounding,s),this.shapeBuffer=i}getBufferLength(){return this.buffer&&this.buffer.length>0?this.buffer.length:this.shape.length*this.getRepetitionCount()}generateBuffer(t,e){return void 0!==this.shapeBuffer&&"function"!=typeof this.props.sideLength&&"function"!=typeof this.shape||this.bindBuffer(e),this.shapeBuffer}setShape(t){this.shape=N.adapt(t,this.adaptMode),this.clearBuffer(!0)}getAdaptMode(){return this.adaptMode}static getBuffer(t={}){const e=new this({...t,sideLength:t.sideLength||1});return e.generate(),e.getBuffer()||new Float32Array}}class vt extends dt{constructor(t){t.type=t.type||"ShapeRecursive",super(t),this.props.recursions=t.recursions||1,this.props.recursionScale=t.recursionScale||2,this.props.recursionVertex=t.recursionVertex||0,this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed(),this.shapeUseRecursion=!!t.shapeUseRecursion}clearBuffer(t=!1,e=!0){t&&(this.shapeRecursiveBuffer=void 0),super.clearBuffer(t,e)}isStatic(){return"function"!=typeof this.props.recursions&&"function"!=typeof this.props.recursionScale&&"function"!=typeof this.props.recursionVertex&&super.isStatic()}isStaticIndexed(){return"function"!=typeof this.props.recursions&&"function"!=typeof this.props.recursionVertex&&super.isStaticIndexed()}generateBuffer(t,e){return this.shape?((void 0===this.shapeRecursiveBuffer||this.shapeUseParent||this.shape.generateId!==t)&&this.bindBuffer(t,e),this.shapeRecursiveBuffer):dt.EMPTY_BUFFER}bindBuffer(t,e){const i=Math.floor(this.getProp("recursions",e,1)),s=Math.floor(this.getProp("recursionVertex",e,0)),r=this.getProp("recursionScale",e,2),n=this.shape;let o={index:1,offset:1,count:1,level:{index:1,offset:i>1?0:1,count:1}};const h={...e,recursion:o};n.generate(t,!1,h);const a=n.getBuffer();if(i<=1)return void(this.shapeRecursiveBuffer=a);let c=a;const p=[o];let f=0,u=1;const d=c.length,l=d/2,g=s<=0?l:Math.min(s,l),y=0===s?1:l/Math.min(s,l),x=new Float32Array(vt.summmation(i,g)*d);for(let t=0;t<d;t+=2)x[t]=c[t],x[t+1]=c[t+1];for(let e=1;e<i;e++){const s=i>1?e/(i-1):1,a=vt.summmation(e,g)*d,l=e-1,v=0===l?0:vt.summmation(l,g)*d;for(let l=0,S=g**e;l<S;l++,u++){o={index:l+1,offset:S>1?l/(S-1):1,count:S,level:{index:e+1,offset:s,count:i},parent:p[f]},p.push(o),this.shapeUseRecursion&&(h.recursion=o,n.generate(t,!1,h),c=n.getBuffer());const w=a+l*d,m=Math.floor(v+2*l*y),M=x[m],B=x[m+1],b=r**e;for(let t=0,e=d;t<e;t+=2){const e=c[t]/b,i=c[t+1]/b;x[w+t]=M+e,x[w+t+1]=B+i}u%g==0&&(f+=1)}}this.shapeRecursiveBuffer=x}addIndex(t,e,i){if(this.shape){const s={repetition:e,shape:this},r=Math.floor(this.getProp("recursions",s,1)),n=Math.floor(this.getProp("recursionVertex",s,0)),o={shape:this,frameLength:t,singleRepetitionBounding:i,repetition:{type:e.type,angle:e.angle,index:e.index,count:e.count,offset:e.offset,row:{index:e.row.index,count:e.row.count,offset:e.row.offset},col:{index:e.col.index,count:e.col.count,offset:e.col.offset}},recursion:{index:1,offset:1,count:1,level:{index:1,offset:r>1?0:1,count:r}}},h=this.shape.getIndexedBuffer()||[];for(let t=0,e=h.length;t<e;t++){const e={...h[t]},i={index:1,offset:1,count:1,level:{index:1,offset:r>1?0:1,count:r}},s={...o,recursion:i},n=e.parent?dt.setIndexedParent(e.parent,s):s;this.indexedBuffer.push({...e,parent:n})}if(r>1){const t=this.shape.getBufferLength({...s,parent:{...o}})/2,e=n<=0?t:Math.min(n,t),i=this.indexedBuffer.map((t=>[t.parent.recursion]));let a=0,c=1;for(let t=1;t<r;t++){const s=r>1?t/(r-1):1;for(let n=0,p=e**t;n<p;n++,c++){const f=p>1?n/(p-1):1;for(let u=0,d=h.length;u<d;u++){const d={...h[u]},l={index:n+1,offset:f,count:p,level:{index:t+1,offset:s,count:r},parent:i[u][a]},g={...o,recursion:l},y=d.parent?dt.setIndexedParent(d.parent,g):g;this.indexedBuffer.push({...d,parent:y}),i[u].push(l),c%e==0&&(a+=1)}}}}}}static summmation(t,e){if(1===t)return 1;let i=1;for(let s=1;s<t;s++)i+=e**s;return i}static getEmptyRecursion(){return{index:1,offset:1,count:1,level:{index:1,offset:1,count:1}}}}class St extends dt{constructor(t){t.type=t.type||"ShapeFollow",super(t),this.follow=t.follow||t.shape,this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed(),this.shapeUseFollow=!!t.shapeUseFollow}clearBuffer(t=!1,e=!0){t&&(this.shapeFollowBuffer=void 0),super.clearBuffer(t,e)}isStatic(){return(!this.follow||this.follow.isStatic())&&super.isStatic()}isStaticIndexed(){return(!this.follow||this.follow.isStaticIndexed())&&super.isStaticIndexed()}generateBuffer(t,e){return this.shape&&this.follow?((void 0===this.shapeFollowBuffer||this.shapeUseParent||this.shape.generateId!==t||this.follow.generateId!==t)&&this.bindBuffer(t,e),this.shapeFollowBuffer):dt.EMPTY_BUFFER}bindBuffer(t,e){const i=this.follow;i.generate(t,!1,e);const s=i.getBuffer(),r={...e,follow:{index:1,offset:1,count:1}},n=this.shape;n.generate(t,!1,r);let o=n.getBuffer();const h=o.length,a=new Float32Array(h*(s.length/2)),c=s.length/2;for(let e=0;e<c;e++){const i={index:e+1,offset:c>1?e/(c-1):1,count:c};this.shapeUseFollow&&(r.follow=i,n.generate(t,!1,r),o=n.getBuffer());const p=e*h,f=2*e,u=s[f],d=s[f+1];for(let t=0,e=o.length;t<e;t+=2)a[p+t]=u+o[t],a[p+t+1]=d+o[t+1]}this.shapeFollowBuffer=a}addIndex(t,e,i){if(this.shape){const s={shape:this,frameLength:t,singleRepetitionBounding:i,repetition:{type:e.type,angle:e.angle,index:e.index,count:e.count,offset:e.offset,row:{index:e.row.index,count:e.row.count,offset:e.row.offset},col:{index:e.col.index,count:e.col.count,offset:e.col.offset}},follow:{index:1,offset:1,count:1}},r=this.shape.getIndexedBuffer()||[];for(let t=0,e=r.length;t<e;t++)for(let t=0,e=this.follow.getBuffer().length/2;t<e;t++){const i=e>1?t/(e-1):1;for(let n=0,o=r.length;n<o;n++){const o={...r[n]},h={...s,follow:{index:t+1,offset:i,count:e}},a=o.parent?dt.setIndexedParent(o.parent,h):h;this.indexedBuffer.push({...o,parent:a})}}}}static summmation(t,e){if(1===t)return 1;let i=1;for(let s=1;s<t;s++)i+=e**s;return i}static getEmptyRecursion(){return{index:1,offset:1,count:1,level:{index:1,offset:1,count:1}}}}class wt extends xt{constructor(t={}){t.type="Line",t.shape=[-1,0,1,0],t.adaptMode=Y.None,t.bClosed=!1,super(t)}static toPolygon(t,e){const i=[];if(!Array.isArray(e)){const i=e,s=t.length/2;e=new Array(s);for(let t=0;t<s;t++)e[t]=i}function s(t,e,i,s,r){const n=i-t,o=s-e,h=r/(2*Math.sqrt(n*n+o*o));return[-h*o,h*n]}function r(t,e,i,s){const r=(e[1]-t[1])/(e[0]-t[0]),n=(s[1]-i[1])/(s[0]-i[0]);if(Math.abs(r-n)<1e-5)return;const o=t[1]-r*t[0],h=(o-(i[1]-n*i[0]))/(n-r);return[h,r*h+o]}let n,o,h=[[0,0],[0,0]],a=[[0,0],[0,0]];for(let c=0,p=t.length-2;c<p;c+=2){n=0===c,o=c===p-2;const f=s(t[c],t[c+1],t[c+2],t[c+3],e[c]),u=[t[c]+f[0],t[c+1]+f[1]],d=[t[c+2]+f[0],t[c+3]+f[1]],l=[t[c]-f[0],t[c+1]-f[1]],g=[t[c+2]-f[0],t[c+3]-f[1]];if(!n){const t=r(h[0],h[1],u,d);t&&(i.unshift(t[1]),i.unshift(t[0]));const e=r(a[0],a[1],l,g);e&&(i.push(e[0]),i.push(e[1]))}n&&(i.unshift(u[1]),i.unshift(u[0]),i.push(l[0]),i.push(l[1])),o&&(i.unshift(d[1]),i.unshift(d[0]),i.push(g[0]),i.push(g[1])),o||(h=[u,d],a=[l,g])}return Float32Array.from(i)}}class mt extends xt{constructor(t={}){t.type="Triangle",t.shape=[1,0,-1,1,-1,-1],t.adaptMode=Y.None,super(t)}}class Mt extends xt{constructor(t={}){t.type="Rect",t.shape=[1,1,-1,1,-1,-1,1,-1],t.adaptMode=Y.None,super(t)}}class Bt extends yt{constructor(t={}){t.type=t.type||"Polygon",t.loopDependencies=(t.loopDependencies||[]).concat(["sideNumber"]),super(t,!0),this.props.sideNumber=t.sideNumber,this.loop={start:0,end:U,inc:t=>U/this.getProp("sideNumber",t,5),vertex:t=>[Math.cos(t.current),Math.sin(t.current)]},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}}class bt extends yt{constructor(t={}){t.type="Circle",super(t,!0),this.loop={start:0,end:U,inc:t=>{const e=this.getRepetitionSideLength(t);return 1/Math.pow(e[0]*e[1],.25)*yt.PId2},vertex:t=>[Math.cos(t.current),Math.sin(t.current)]},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}}class Pt extends yt{constructor(t={}){t.type=t.type||"Polygon",t.loopDependencies=(t.loopDependencies||[]).concat(["spikes","innerRadius"]),super(t,!0),this.props.spikes=t.spikes,this.props.innerRadius=t.innerRadius,this.loop={start:0,end:U,inc:t=>this.inc,vertex:t=>{const e=Math.PI/this.spikes*t.index,i=t.index%2==0?1:this.innerRadius;return[Math.cos(e)*i,Math.sin(e)*i]}},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}generateLoopBuffer(t){return this.spikes=this.getProp("spikes",t,5),this.innerRadius=this.getProp("innerRadius",t,.5),this.inc=Math.PI/this.spikes,super.generateLoopBuffer(t)}}class It extends yt{constructor(t={}){t.type="Rose",t.loopDependencies=(t.loopDependencies||[]).concat(["n","d"]),super(t,!0),this.props.n=t.n??1,this.props.d=t.d??2,this.loop={start:0,end:t=>It.getFinalAngleFromK(this.getProp("n",t),this.getProp("d",t)),inc:t=>{const e=this.getProp("n",t),i=this.getProp("d",t),s=this.getRepetitionSideLength(t),r=Math.pow(s[0]*s[1],.45);return U/(r*(i<e?e/i:1.5))},vertex:t=>{const e=Math.cos(this.k*t.current);return[e*Math.cos(t.current),e*Math.sin(t.current)]}},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}generateLoopBuffer(t){return this.k=this.getProp("n",t)/this.getProp("d",t),super.generateLoopBuffer(t)}static getFinalAngleFromK(t,e){if(t==e)return U;const i=t/e,s=t*e;return Number.isInteger(i)||i%.5!=0?Math.PI*e*(s%2==0?2:1):4*Math.PI}}class Lt extends yt{constructor(t={}){t.type="Spiral",t.bClosed=!1,t.loopDependencies=(t.loopDependencies||[]).concat(["twists","twistsStart","spiral"]),super(t,!0),this.props.spiral=t.spiral??Lt.types.ARCHIMEDE,this.props.twists=t.twists??2,this.props.twistsStart=t.twistsStart??0,this.loop={start:t=>U*this.getProp("twistsStart",t),end:t=>U*(this.getProp("twistsStart",t)+this.getProp("twists",t)),inc:t=>{const e=this.getProp("twists",t),i=U*e,s=this.getRepetitionSideLength(t);return i/((4+Math.sqrt(s[0]*s[1]))*e)},vertex:t=>{const e=this.r(t.current);return[e*Math.cos(t.current),e*Math.sin(t.current)]}},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}generateLoopBuffer(t){return this.spiral=this.getProp("spiral",t),this.r=Lt.getRFromTSpiralType(this.spiral),super.generateLoopBuffer(t)}static getRFromTSpiralType(t){switch(t){case Lt.types.ARCHIMEDE:return t=>t/10;case Lt.types.HYPERBOLIC:return t=>1/t*3;case Lt.types.FERMAT:return t=>t**.5/3;case Lt.types.LITUUS:return t=>t**-.5;case Lt.types.LOGARITHMIC:return t=>Math.E**(.2*t)/10}return t=>t}}Lt.types={ARCHIMEDE:"ARCHIMEDE",HYPERBOLIC:"HYPERBOLIC",FERMAT:"FERMAT",LITUUS:"LITUUS",LOGARITHMIC:"LOGARITHMIC"};class Rt extends yt{constructor(t={}){t.type="Lissajous",t.loopDependencies=(t.loopDependencies||[]).concat(["wx","wy","wz"]),super(t,!0),this.props.wx=t.wx||1,this.props.wy=t.wy||2,this.props.wz=t.wz||0,this.loop={start:0,end:U,inc:t=>{const e=this.getProp("wx",t),i=this.getProp("wy",t),s=e==i?yt.PId2:.5-.01*Math.min(49,e+i),r=this.getRepetitionSideLength(t);return 1/Math.pow(r[0]*r[1],.25)*s},vertex:t=>this.wx===this.wy?[Math.cos(t.current+this.wz),Math.sin(t.current)]:[Math.cos(this.wx*t.current+this.wz),Math.sin(this.wy*t.current)]},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}generateLoopBuffer(t){return this.wx=this.getProp("wx",t,1),this.wy=this.getProp("wy",t,2),this.wz=this.getProp("wz",t,2),super.generateLoopBuffer(t)}}class At extends yt{constructor(t={}){t.type="SuperShape",t.loopDependencies=(t.loopDependencies||[]).concat(["a","b","m","n1","n2","n3"]),super(t,!0),this.props.a=t.a??1,this.props.b=t.b??1,this.props.m=t.m??6,this.props.n1=t.n1??1,this.props.n2=t.n2??1,this.props.n3=t.n3??1,this.loop={start:0,end:U,inc:t=>{const e=this.getRepetitionSideLength(t);return Math.PI/Math.pow(e[0]*e[1],.5)},vertex:t=>{const e=t.current,i=this.m*e/4,s=(Math.abs(Math.cos(i)/this.a)**this.n2+Math.abs(Math.sin(i)/this.b)**this.n3)**(1/this.n1),r=0===s?1:1/s;return[r*Math.cos(e),r*Math.sin(e)]}},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}generateLoopBuffer(t){return this.a=this.getProp("a",t),this.b=this.getProp("b",t),this.m=this.getProp("m",t),this.n1=this.getProp("n1",t),this.n2=this.getProp("n2",t),this.n3=this.getProp("n3",t),super.generateLoopBuffer(t)}}class Ft extends D{constructor(){super()}apply(t,e,i){return Ft.call(t)}static call(t){const e=t.length;if(Ft.isClosed(t))return t;const i=new Float32Array(e+2);return i.set(t,0),i[e]=i[0],i[e+1]=i[1],i}static isClosed(t){const e=t.length;return t[0]===t[e-2]&&t[1]===t[e-1]}}class Ct extends D{constructor(t={}){super(),this.level=t.level||1;const e=Array.isArray(t.tension)?t.tension:[t.tension];this.tension=new Array(this.level).fill(.5).map(((t,i)=>K(0,1,e[i]||t))),this.level=this.level<1?1:this.level,this.closed=!0===t.closed}apply(t,e){if(e&&!Ft.isClosed(t)){const e=t.length,i=new Float32Array(e+2);i.set(t,0),i[e]=t[0],i[e+1]=t[1],t=i}let i=t;for(let t=0,s=this.level;t<s;t++)i=Ct.smooth(i,this.tension[t],e||this.closed);return i}static smooth(t,e=.5,i=!1){const s=t.length,r=new Float32Array(2*(t.length-(i?1:0)));i||(r[0]=t[0],r[1]=t[1]);const n=.05+.4*e,o=1-n;let h=i?0:2;for(let e=0,i=s-2;e<i;e+=2,h+=4)r[h]=o*t[e]+n*t[e+2],r[h+1]=o*t[e+1]+n*t[e+3],r[h+2]=n*t[e]+o*t[e+2],r[h+3]=n*t[e+1]+o*t[e+3];return i?(r[h]=r[0],r[h+1]=r[1]):(r[h]=t[s-2],r[h+1]=t[s-1]),r}}class Et extends D{constructor(t={}){super(),this.closed=!0===t.closed,this.thickness=t.thickness||.2,this.error=t.error}apply(t,e){return Et.solidify(t,this.thickness,this.closed,this.error)}static solidify(t,e,i=!1,s){const r=[],n=(e="number"==typeof e?[e]:e).length;let o,h,a=[[0,0],[0,0]],c=[[0,0],[0,0]];for(let i=0,p=0,f=t.length-2;i<f;i+=2,p++){o=0===i,h=i===f-2;const u={index:i+1,offset:i/f,count:f},d={index:i+2,offset:(i+1)/f,count:f},l="function"==typeof e?e(u):e[p%n],g="function"==typeof e?e(d):e[(p+1)%n],y=Et.getOffsets(t[i],t[i+1],t[i+2],t[i+3],l),x=Et.getOffsets(t[i],t[i+1],t[i+2],t[i+3],g),v=[t[i]+y[0],t[i+1]+y[1]],S=[t[i+2]+x[0],t[i+3]+x[1]],w=[t[i]-y[0],t[i+1]-y[1]],m=[t[i+2]-x[0],t[i+3]-x[1]];if(!o){const t=Et.getIntersection(a[0],a[1],v,S,s);t&&(r.unshift(t[1]),r.unshift(t[0]));const e=Et.getIntersection(c[0],c[1],w,m,s);e&&(r.push(e[0]),r.push(e[1]))}o&&(r.unshift(v[1]),r.unshift(v[0]),r.push(w[0]),r.push(w[1])),h&&(r.unshift(S[1]),r.unshift(S[0]),r.push(m[0]),r.push(m[1])),h||(a=[v,S],c=[w,m])}if(i){const e=t.length-2,i=r.length-2,s=.5*r[0]+.5*r[e],n=.5*r[1]+.5*r[e+1],o=.5*r[e+2]+.5*r[i],h=.5*r[e+3]+.5*r[i+1];r[0]=s,r[1]=n,r[e]=s,r[e+1]=n,r[e+2]=o,r[e+3]=h,r[i]=o,r[i+1]=h}return Float32Array.from(r)}static getOffsets(t,e,i,s,r){const n=i-t,o=s-e,h=r/(2*Math.sqrt(n*n+o*o));return[-h*o,h*n]}static getIntersection(t,e,i,s,r=1e-5){const n=(e[1]-t[1])/(e[0]-t[0]),o=(s[1]-i[1])/(s[0]-i[0]);if(Math.abs(n-o)<r)return;const h=t[1]-n*t[0],a=(h-(i[1]-o*i[0]))/(o-n);return[a,n*a+h]}}class Ot extends D{constructor(t={}){super(),this.level=t.level||1,this.level=this.level<1?1:this.level}apply(t,e){const i=this.level;let s=t;if(s&&s.length>0)for(let t=0;t<i;t++)s=Ot.subdivide(s,e);return s}static subdivide(t,e=!1){const i=t.length,s=new Float32Array(2*i-(e?0:2));for(let e=0;e<i;e+=2)if(0===e)s[0]=t[0],s[1]=t[1];else{const i=t[e-2],r=t[e-1],n=t[e],o=t[e+1],h=(n+i)/2,a=(o+r)/2;s[2*(e-1)]=h,s[2*(e-1)+1]=a,s[2*e]=n,s[2*e+1]=o}return e&&(s[2*(i-1)]=(t[0]+t[i-2])/2,s[2*(i-1)+1]=(t[1]+t[i-1])/2),s}}const Ut={Adapt:N,Mirror:class extends D{constructor(t={x:!0,y:!0}){super(),this.x=!0===t.x,this.y=!0===t.y}apply(t,e){const i=t.length,s=new Float32Array(i*(this.x?2:1)*(this.y?2:1));if(this.x&&this.y){const e=i+i,r=e+i;for(let n=0;n<i;n+=2)s[n]=t[n]-1,s[n+1]=t[n+1]-1,s[i+n]=-1*t[i-2-n]+1,s[i+n+1]=t[i-2-n+1]-1,s[e+n]=-1*t[n]+1,s[e+n+1]=-1*t[n+1]+1,s[r+n]=t[i-2-n]-1,s[r+n+1]=-1*t[i-2-n+1]+1}else if(this.x)for(let e=0;e<i;e+=2)s[e]=t[e]-1,s[e+1]=t[e+1],s[i+e]=-1*t[i-2-e]+1,s[i+e+1]=t[i-2-e+1];else{if(!this.y)return t;for(let e=0;e<i;e+=2)s[e]=t[e],s[e+1]=t[e+1]-1,s[i+e]=t[i-2-e],s[i+e+1]=-1*t[i-2-e+1]+1}return s}},Smooth:Ct,Solidify:Et,Subdivide:Ot,Close:Ft,Offset:class extends D{constructor(t={from:0,to:void 0}){super(),this.from=t.from,this.to=t.to}apply(t,e){return t.subarray(this.from,this.to?this.to<0?t.length+this.to:this.to:void 0)}}};n(Array)})();var r=s.Cd,n=s.v0,o=s.ii,h=s.ZA,a=s.x1,c=s.O7,p=s.Dg,f=s.qn,u=s.Q_,d=s.yo,l=s.mg,g=s.UL,y=s.he,x=s.xs,v=s.YM,S=s.bn,w=s.pK,m=s.rR,M=s.Sj,B=s.Xc,b=s.Gx,P=s.vI,I=s.rU,L=s.Ux,R=s.yq,A=s.CJ,F=s.Sg,C=s.B7,E=s.aT,O=s.uZ,U=s.db,T=s.NZ,k=s.sX,D=s.t7,Y=s.cM,z=s.wQ,q=s.tF,X=s.zO,N=s.tm,H=s.MX,Z=s.Sr,j=s.yx,G=s.Yr;export{r as Circle,n as EBoundingType,o as ERepetitionType,h as Group,a as Line,c as Lissajous,p as Modifier,f as Modifiers,u as PHI,d as PI2,l as Polygon,g as Rect,y as Rose,x as Scene,v as SceneChild,S as Shape,w as ShapeBase,m as ShapeBuffer,M as ShapeFollow,B as ShapeLoop,b as ShapePrimitive,P as ShapeRecursive,I as Spiral,L as Star,R as SuperShape,A as Triangle,F as Vec2,C as angle2FromRepetition,E as angleFromRepetition,O as clamp,U as distanceFromRepetition,T as distributePointsInBuffer,k as interpolate,D as lerp,Y as log,z as mod,q as noise,X as now,N as prepareBufferForInterpolation,H as random,Z as relativeClamp,j as toDegrees,G as toRadians};